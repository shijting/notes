# 视频安防后端接口文档

---

**修改记录：**

| 版本 | 修改内容 | 时间       |
| ---- | -------- | ---------- |
| v1.0 | 初次提供 | 2021.06.23 |
|      |          |            |
|      |          |            |

#### 

## 一、关于请求

### 1、公共参数

**公共参数指的是所有接口调用都需要用到的参数，包含公共请求参数和公共返回参数两种。**

#### (1) 公共请求参数

| 名称                 | 类型   | 是否必选 | 描述                                                         |
| :------------------- | :----- | :------- | :----------------------------------------------------------- |
| Version              | String | 是       | API 版本号。格式：YYYY-MM-DD。本版本对应为 2018-12-12。      |
| AccessKeyId          | String | 是       | 监控系统颁发给用户的访问服务所用的密钥 ID。                  |
| Signature            | String | 是       | 签名结果串。关于签名的计算方法，参见签名机制。               |
| SignatureMethod      | String | 是       | 签名方式，目前支持 HMAC-SHA1。                               |
| Timestamp            | String | 是       | 请求的时间戳。日期格式按照 ISO8601 标准表示，并需要使用 UTC 时间。格式：YYYY-MM-DDThh:mm:ssZ。例如：2014-05-26T12:00:00Z（为北京时间 2014 年 5 月 26 日 20 点 0 分 0 秒）。 |
| signature_version    | String | 是       | 签名算法版本。目前版本是 1.0。                               |
| SignatureNonce       | String | 是       | 唯一随机数，用于防止网络重放攻击。用户在不同请求间要使用不同的随机数值。 |
| ResourceOwnerAccount | String | 否       | 本次 API 请求访问到的资源拥有者账户，即登录用户名。此参数的使用方法，参见 RAM资源授权。（只能在 RAM 中可对 live 资源进行授权的 Action 中才能使用此参数，否则访问会被拒绝。） |
| Format               | String | 否       | 返回值的类型，支持 JSON 格式。                               |

**示例**

```http
http://www.xxxxxx.com/
?Format=json
&Version=2018-12-12
&Signature=Pc5WB8gokVn0xfeu%2FZV%2BiNM1dgI%3D
&SignatureMethod=HMAC-SHA1
&SignatureNonce=15215528852396
&SignatureVersion=1.0
&AccessKeyId=key-test
&Timestamp=2012-06-01T12:00:00Z
…
```

#### (2) 公共响应参数

**用户发送的每次接口调用请求，无论成功与否，系统都会返回一个唯一识别码 RequestId 给用户。**

| 名称      | 类型   | 是否必选 | 描述   |
| :-------- | :----- | :------- | :----- |
| RequestId | String |          | 请求id |

**示例(json)**

```json
{
  "RequestId": "4C467B38-3910-447D-87BC-AC049166XXXX",
  /* 返回结果数据 */
}
…
```

### 2、调用方式

**对视频监控 API 的调用是通过向视频监控 API 的服务端地址发送 HTTP GET 请求，并按照接口说明在请求中加入相应请求参数来完成的。根据请求的处理情况，系统会返回处理结果。**

### 3、请求结构

**通信协议**
支持使用 HTTP 通道发送API请求。

**字符编码**
请求及返回结果都使用 UTF-8 字符集进行编码。


**返回结果**

调用 API 服务后返回数据采用统一格式：

返回的 HTTP 状态码为 2xx，代表调用成功。 返回的 HTTP 状态码为 4xx 或 5xx，代表调用失败。 调用成功返回的数据格式为 JSON ，外部系统可以在请求时传入参数来制定返回的数据格式，默认为 JSON 格式。

> 说明 本文档中的返回示例为了便于用户查看，做了格式化处理，实际返回结果是没有进行换行、缩进等处理的。

**成功结果**
JSON示例

```json
{
    "RequestId":"16A96B9A-F203-4EC5-8E43-CB92E68FXXXX"
}
```

**错误结果**
调用接口出错后，将不会返回结果数据。调用方可根据每个接口对应的错误码以及下述公共错误码来定位错误原因。 当调用出错时，HTTP 请求返回一个 4xx 或 5xx 的 HTTP 状态码。返回的消息体中是具体的错误代码及错误信息。另外还包含一个全局唯一的请求 ID：RequestId 和一个您该次请求访问的站点 ID：HostId。在调用方找不到错误原因时，可以联系监控系统客服，并提供该 HostId 和RequestId，以便我们尽快帮您解决问题。

JSON示例

```json
{
  	"Status": 0,
    "Code":"InternalError",
    "HostId":"vs.xxxxx.com",
    "Message":"The request processing has failed due to some unknown error.",
    "RequestId":"6EBD1AC4-C34D-4AE1-963E-B688A228XXXX"
  	"Data": {}
}
```

### 4、签名机制

监控系统会对每个访问的请求进行身份验证，所以无论使用 HTTP 还是 HTTPS 协议提交请求，都需要在请求中包含签名（Signature）信息。通过使用 Access Key ID 和 Access Key Secret 进行对称加密的方法来验证请求的发送者身份。 Access Key ID 和 Access Key Secret 由监控系统颁发给访问者（可以通过监控系统申请和管理），其中 Access Key ID 用于标识访问者的身份； Access Key Secret 是用于加密签名字符串和服务器端验证签名字符串的密钥，必须严格保密，只有监控系统和用户知道。

**签名操作**
您在访问时，需要按照下面的方法对请求进行签名处理。

1. 使用请求参数构造规范化的请求字符串（Canonicalized Query String）。
   i.参数排序。
   按照参数名称的字典顺序对请求中所有的请求参数（包括“公共请求参数”和接口的自定义参数，但不包括“公共请求参数”中的 Signature 参数）进行排序。

   >说明：当使用 GET 方法提交请求时，这些参数就是请求 URI 中的参数部分（即 URI 中“?”之后由“&”连接的部分）。

   ii.参数编码。
   对排序之后的请求参数的名称和值分别用 UTF-8 字符集进行 URL 编码。编码的规则如下：

   + 对于字符 A~Z、a~z、0~9 以及字符“-”、“_”、“.”、“~”不编码
   + 对于其它字符编码成 %XY 的格式，其中 XY 是字符对应 ASCII 码的 16 进制表示。例如：英文的双引号（”）对 应的编码为 %22。
   + 对于扩展的 UTF-8 字符，编码成 %XY%ZA… 的格式。
   + 英文空格（ ）要编码成 %20，而不是加号（+）。

   该编码方式和一般采用的 application/x-www-form-urlencoded MIME 格式编码算法（比如 Java 标准库中的 java.net.URLEncoder 的实现）相似，但又有所不同。实现时，可以先用标准库的方式进行编码，然后把编码后的字符串中加号（+）替换成 %20、星号（*）替换成 %2A、%7E 替换回波浪号（~），即可得到上述规则描述的编码字符串。这个算法可以用下面的 percentEncode 方法来实现：

   ```java
   	{
   		private static final String ENCODING = "UTF-8";
   		private static String percentEncode(String value) throws UnsupportedEncodingException {
   		return value != null ? URLEncoder.encode(value, ENCODING).replace("+", "%20").replace("*",     "%2A").replace("%7E", "~") : null;
   	}
   ```

   iii.将编码后的参数名称和值用英文等号（=）进行连接。
   iv.将等号连接得到的参数组合按步骤 i 排好的顺序依次使用“&”符号连接，即得到规范化请求字符串。

2. 将上一步构造的规范化字符串按照下面的规则构造成待签名的字符串。

```java
	1. StringToSign=
	2. HTTPMethod + “&” +
	3. percentEncode(“/”) + ”&” +
	4. percentEncode(CanonicalizedQueryString)
```

其中：
	1) HTTPMethod 是提交请求用的 HTTP 方法，比如 GET。
	2) percentEncode(“/”) 是按照步骤 1.ii 中描述的 URL 编码规则对字符 “/” 进行编码得到的值，即 %2F。
	3) percentEncode(CanonicalizedQueryString) 是对步骤 1 中构造的规范化请求字符串按步骤 1.ii 中描述的 URL 编码规则编码后得到的字符串。
	

3. 按照 RFC2104 的定义，计算待签名字符串 StringToSign 的 HMAC 值。

   > 说明：计算签名时使用的 Key 就是您持有的 Access Key Secret 并加上一个 “&” 字符（ASCII:38），使用的哈希算法是 SHA1。

4. 按照 Base64 编码规则把上面的 HMAC 值编码成字符串，即得到签名值（Signature）。

5. 将得到的签名值作为 Signature 参数添加到请求参数中，即完成对请求签名的过程。

   > 说明：得到的签名值在作为最后的请求参数值提交给视频直播服务器的时候，要和其他参数一样，按照 RFC3986 的规则进行 URL 编码）。


**示例**
以 DescribeGroup 为例，签名前的请求 URL 为：

```http
http://www.xxxxxx.com/?Format=JSON&SignatureMethod=HMAC-SHA1&Action=DescribeGroup&AccessKeyId=testid&SignatureNonce=c2fe8fbb-2977-4414-8d39-348d02419c1c&Version=2018-12-12&SignatureVersion=1.0&Timestamp=2019-02-28T00:00:00Z
```

那么 StringToSign 就是：

```
GET&%2F&AccessKeyId%3Dtestid%26Action%3DDescribeGroup%26Format%3DJSON%26SignatureMethod%3DHMAC-SHA1%26SignatureNonce%3Dc2fe8fbb-2977-4414-8d39-348d02419c1c%26SignatureVersion%3D1.0%26Timestamp%3D2019-02-28T00%253A00%253A00Z%26Version%3D2018-12-12
```

假如使用的 Access Key Id是“testid”， Access Key Secret是“testsecret”，用于计算 HMAC 的 Key 就是 “testsecret&”，则计算得到的签名值是：

```
sgILSN6tpSSOFF3I1NKD+/z0Nos=
```

签名后的请求 URL 为（注意增加了 Signature 参数）：

```http
http://live.xxxxxx.com/?Format=JSON&SignatureMethod=HMAC-SHA1&Action=DescribeGroup&AccessKeyId=testid&SignatureNonce=c2fe8fbb-2977-4414-8d39-348d02419c1c&Version=2018-12-12&SignatureVersion=1.0&Timestamp=2019-02-28T00:00:00Z&Signature=sgILSN6tpSSOFF3I1NKD%2B%2Fz0Nos%3D
```

## 二、具体接口

### 1、空间操作接口

#### (1) CreateGroup

**接口描述**
创建新的业务空间。

**请求参数**

| 参数        | 类型   | 是否必要 | 示例值          | 描述                                                   |
| ----------- | ------ | -------- | --------------- | ------------------------------------------------------ |
| Action      | String | 是       | CreateGroup     | 操作接口名，系统规定参数。取值：CreateGroup            |
| Name        | String | 是       | 视频监控        | 空间名称。                                             |
| Description | String | 否       | 视频监控        | 空间描述。                                             |
| Region      | String | 是       | cn-shanghai     | 空间所属区域，即服务中心。                             |
| App         | String | 否       | live            | 空间使用的应用名称，默认live。                         |
| InProtocol  | String | 是       | gb28181         | 空间使用的接入协议。取值：gb28181,rtmp                 |
| OutProtocol | String | 是       | rtmp,flv        | 空间使用的播放协议，多值用逗号分隔。取值：flv,hls,rtmp |
| LazyPull    | Bool   | 否       | false           | 是否启用按需拉流，默认false                            |
| Callback    | String | 否       | my.callback.com | 空间内设备/流状态更新时的回调                          |

**返回参数**

| 参数      | 类型   | 示例值                               | 描述                                                       |
| --------- | ------ | ------------------------------------ | ---------------------------------------------------------- |
| Id        | String | 32388487739092994                    | 空间ID。                                                   |
| GbId      | String | 31000000000000000001                 | 空间提供的国标ID。（仅适用于国标接入的空间）               |
| GbIp      | String | 1.1.1.1                              | 空间提供的的国标信令服务器地址。（仅适用于国标接入的空间） |
| GbPort    | int    | 5060                                 | 空间提供的国标信令服务器端口。（仅适用于国标接入的空间）   |
| RequestId | String | BEA5625F-8FCF-48F4-851B-CA63946DA664 | 该条任务请求ID。                                           |

**示例**

**请求示例**

```http
http://172.16.230.63?AccessKeyId=49e1dc48688592957a586bcd00109f67&Action=CreateGroup&Description=spacedesc&Format=JSON&InProtocol=rtmp&LazyPull=false&Name=sapcename1&OutProtocol=flv%2Crtmp%2Chls&PlayDomain=&PushDomain=&Signature=SySf0a7KVAdS9vCM1DAG%2Fmv%2Bhk8%3D&SignatureMethod=HMAC-SHA1&SignatureNonce=cd77a055619a4415b2be30e30cf57da2&SignatureVersion=1.0&Timestamp=2021-06-23T05%3A01%3A18Z&Version=2018-12-12
```

**返回示例**

```json
{
    "RequestId":"BEA5625F-8FCF-48F4-851B-CA63946DA664",
    "Id":"32388487739092994 "
}
```

#### 	(2) DeleteGroup

**接口描述**
删除空间。

> 注意：空间需先停用才能删除。

**请求参数**

| 参数   | 类型   | 是否必要 | 示例值      | 描述                                        |
| ------ | ------ | -------- | ----------- | ------------------------------------------- |
| Action | String | 是       | DeleteGroup | 操作接口名，系统规定参数。取值：DeleteGroup |
| Id     | String | 是       | 10001       | 空间ID。                                    |

**返回参数**

| 参数      | 类型  | 示例值                               | 描述             |
| --------- | ----- | ------------------------------------ | ---------------- |
| RequestId | tring | BEA5625F-8FCF-48F4-851B-CA63946DA664 | 该条任务请求ID。 |

**示例**

**请求示例**

```http
http://172.16.230.63?AccessKeyId=49e1dc48688592957a586bcd00109f67&Action=DeleteGroup&Format=JSON&Id=1624424478602281&Signature=4ieVtzgqUOg%2F8EhuiEom4aQyD1w%3D&SignatureMethod=HMAC-SHA1&SignatureNonce=65e2e9353ea0460cb54d08ddd300809f&SignatureVersion=1.0&Timestamp=2021-06-23T05%3A17%3A39Z&Version=2018-12-12
```

**返回示例**

```json
{
    "ID":"1624424478602281",
    "RequestId":"C5D73119-6B2E-BE8C-03DE-1747FA15AC85"
}
```

#### 	(3) DescribeGroup

**接口描述**
获取空间信息。

**请求参数**

| 参数         | 类型   | 是否必要 | 示例值            | 描述                                          |
| ------------ | ------ | -------- | ----------------- | --------------------------------------------- |
| Action       | String | 是       | DescribeGroup     | 操作接口名，系统规定参数。取值：DescribeGroup |
| Id           | String | 是       | 32388487739092994 | 空间ID。                                      |
| IncludeStats | Bool   | 否       | false             | 是否返回设备统计信息，默认false。             |

**返回参数**

| 参数            | 类型   | 示例值                               | 描述                                                        |
| --------------- | ------ | ------------------------------------ | ----------------------------------------------------------- |
| Id              | String | 32388487739092994                    | 空间ID。                                                    |
| Name            | String | 视频监控                             | 空间名称。                                                  |
| Description     | String | 视频监控                             | 空间描述。                                                  |
| Region          | String | cn-shanghai                          | 空间所属区域，即服务中心。                                  |
| App             | String | live                                 | 空间使用的应用名称。                                        |
| InProtocol      | String | gb28181                              | 空间使用的接入协议。取值：gb28181,rtmp                      |
| OutProtocol     | String | rtmp,flv                             | 空间使用的播放协议，多值用逗号分隔。取值：flv,hls,rtmp      |
| Enabled         | Bool   | true                                 | 空间是否启用。                                              |
| Status          | String | on                                   | 空间状态。取值：on(已启用),off(已停用)                      |
| CreatedTime     | String | 2019-02-28T17:00:17Z                 | 空间创建时间。                                              |
| Callback        | String | my.callback.com                      | 空间内设备状态更新时的回调                                  |
| GbId            | String | 31000000000000000001                 | 空间提供的国标ID。（仅适用于国标接入的空间）                |
| GbIp            | String | 1.1.1.1                              | 空间提供的的国标信令服务器地址。（仅适用于国标接入的空间）  |
| GbUdpPort       | int    | 5060                                 | 空间提供的国标信令服务器UDP端口。（仅适用于国标接入的空间） |
| GbTcpPort       | int    | 6060                                 | 空间提供的国标信令服务器TCP端口。（仅适用于国标接入的空间） |
| Stats           | Stat   |                                      | 空间设备统计信息。                                          |
| PushRtmpBaseUrl | String | rtmp://monitor.fanson.com.cn/live    | RTMP推流空间推流公共地址。                                  |
| RequestId       | String | BEA5625F-8FCF-48F4-851B-CA63946DA664 | 该条任务请求ID。                                            |

**Stat类型**

| 参数        | 类型 | 示例值 | 描述                 |
| ----------- | ---- | ------ | -------------------- |
| DeviceNum   | int  | 0      | 空间内设备总数。     |
| IpcNum      | int  | 0      | 空间内摄像头数量。   |
| IedNum      | int  | 0      | 空间内智能设备数量。 |
| PlatformNum | int  | 0      | 空间内平台数量。     |

**示例**

**请求示例**

```
http://172.16.230.63?AccessKeyId=49e1dc48688592957a586bcd00109f67&Action=DescribeGroup&Format=JSON&Id=1624424478602281&IncludeStats=true&Signature=r59J6JTvt1InwxlwwnzJhwhPJvg%3D&SignatureMethod=HMAC-SHA1&SignatureNonce=2932758f582141279e927ae75a9580a0&SignatureVersion=1.0&Timestamp=2021-06-23T05%3A01%3A53Z&Version=2018-12-12		
```

**返回示例**

```json
{
    "Id":"1624424478602281",
    "Name":"sapcename1",
    "Description":"spacedesc",
    "Region":"",
    "App":"live",
    "InProtocol":"rtmp",
    "OutProtocol":"flv,rtmp,hls",
    "Enabled":true,
    "Status":"on",
    "CreatedTime":"2021-06-23T05:01:18Z",
    "PushDomain":"",
    "PlayDomain":"",
    "LazyPull":false,
    "Callback":"",
    "GbId":"",
    "GbIp":"",
    "GbUdpPort":"",
    "GbTcpPort":"",
    "Stats":{
        "DeviceNum":0,
        "PlatformNum":0,
        "IedNum":0,
        "IpcNum":0
    },
    "PushRtmpBaseUrl":"rtmp:\\/\\/221.176.54.76:1935\\/live",
    "RequestId":"B1D96A51-9DE6-27E9-CEFD-5AF75642AA76"
}
```

####    (4) DescribeGroups

**接口描述**
查询空间列表。

**请求参数**

| 参数          | 类型   | 是否必要 | 示例值            | 描述                                           |
| ------------- | ------ | -------- | ----------------- | ---------------------------------------------- |
| Action        | String | 是       | DescribeGroups    | 操作接口名，系统规定参数。取值：DescribeGroups |
| Id            | String | 否       | 32388487739092994 | 按空间ID查询。                                 |
| Name          | String | 否       | 视频监控          | 按空间名称查询。                               |
| Region        | String | 否       | cn-shanghai       | 按空间区域查询。                               |
| InProtocol    | String | 否       | rtmp              | 按空间接入协议查询。                           |
| Status        | String | 否       | on                | 按空间状态查询。                               |
| SortBy        | String | 否       | id                | 按给定字段排序，默认按ID排序。                 |
| SortDirection | String | 否       | asc               | 排序方式，默认升序。取值：asc(升序),desc(降序) |
| PageSize      | Int    | 否       | 20                | 分页大小，默认为20。                           |
| PageNum       | Int    | 否       | 1                 | 第几个分页，默认为1。                          |
| IncludeStats  | Bool   | 否       | false             | 是否包含设备统计信息，默认false。              |

**返回参数**

| 参数       | 类型    | 示例值                               | 描述             |
| ---------- | ------- | ------------------------------------ | ---------------- |
| PageSize   | Int     | 20                                   | 分页大小。       |
| PageNum    | Int     | 1                                    | 第几个分页。     |
| PageCount  | Int     | 5                                    | 分页总数。       |
| TotalCount | Int     | 100                                  | 空间总数。       |
| Groups     | Group[] |                                      | 空间列表。       |
| RequestId  | String  | BEA5625F-8FCF-48F4-851B-CA63946DA664 | 该条任务请求ID。 |

**Group类型**

| 参数            | 类型   | 示例值                            | 描述                                                        |
| --------------- | ------ | --------------------------------- | ----------------------------------------------------------- |
| Id              | String | 32388487739092994                 | 空间ID。                                                    |
| Name            | String | 视频监控                          | 空间名称。                                                  |
| Description     | String | 视频监控                          | 空间描述。                                                  |
| Region          | String | cn-shanghai                       | 空间所属区域，即服务中心。                                  |
| App             | String | live                              | 空间使用的应用名称。                                        |
| InProtocol      | String | gb28181                           | 空间使用的接入协议。                                        |
| OutProtocol     | String | rtmp,flv                          | 空间使用的播放协议。                                        |
| Enabled         | Bool   | true                              | 空间是否启用。                                              |
| Status          | String | on                                | 空间状态。                                                  |
| CreatedTime     | String | 2019-02-28T17:00:17Z              | 空间创建时间。                                              |
| LazyPull        | Bool   | false                             | 是否启用按需拉流                                            |
| Callback        | String | my.callback.com                   | 空间内设备状态更新时的回调                                  |
| GbId            | String | 31000000000000000001              | 空间提供的国标ID。（仅适用于国标接入的空间）                |
| GbIp            | String | 1.1.1.1                           | 空间提供的的国标信令服务器地址。（仅适用于国标接入的空间）  |
| GbUdpPort       | Int    | 5060                              | 空间提供的国标信令服务器UDP端口。（仅适用于国标接入的空间） |
| GbTcpPort       | Int    | 6060                              | 空间提供的国标信令服务器TCP端口。（仅适用于国标接入的空间） |
| Stats           | Stat   |                                   | 空间设备统计信息。                                          |
| PushRtmpBaseUrl | String | rtmp://monitor.fanson.com.cn/live | RTMP推流空间推流公共地址。                                  |

**Stat类型**

| 参数        | 类型 | 示例值 | 描述                 |
| ----------- | ---- | ------ | -------------------- |
| DeviceNum   | int  | 0      | 空间内设备总数。     |
| IpcNum      | int  | 0      | 空间内摄像头数量。   |
| IedNum      | int  | 0      | 空间内智能设备数量。 |
| PlatformNum | int  | 0      | 空间内平台数量。     |


**示例**

**请求示例**

```
http://172.16.230.63?AccessKeyId=49e1dc48688592957a586bcd00109f67&Action=DescribeGroups&Format=JSON&Name=&PageNum=1&PageSize=20&Signature=5dpHJdI3gqbn2fakPZRwWr%2F4P6s%3D&SignatureMethod=HMAC-SHA1&SignatureNonce=96a6fa6b6a1b4d8782b6354d3718754f&SignatureVersion=1.0&SortBy=createdTime&SortDirection=desc&Timestamp=2021-06-23T05%3A00%3A25Z&Version=2018-12-12
```

**返回示例**

```json
{
    "PageSize":20,
    "PageNum":1,
    "PageCount":1,
    "TotalCount":10,
    "Groups":[
        {
            "Id":"1624424424523287",
            "Name":"spacename",
            "Description":"spaceDesc",
            "Region":"",
            "App":"live",
            "InProtocol":"gb28181",
            "OutProtocol":"flv,rtmp,hls",
            "Enabled":true,
            "Status":"on",
            "CreatedTime":"2021-06-23T05:00:24Z",
            "PushDomain":"",
            "PlayDomain":"",
            "LazyPull":false,
            "Callback":"",
            "GbId":"34020000002000000144",
            "GbIp":"221.176.54.75",
            "GbUdpPort":"5060",
            "GbTcpPort":"6060",
            "Stats":{
                "DeviceNum":0,
                "PlatformNum":0,
                "IedNum":0,
                "IpcNum":0
            },
            "PushRtmpBaseUrl":""
        }
    ],
    "RequestId":"4F6C9230-AFF5-345C-EB30-C4CB0BB577FB"
}
```

####    (5) ModifyGroup

**接口描述**
修改空间信息。

**请求参数**

| 参数        | 类型   | 是否必要 | 示例值            | 描述                                                   |
| ----------- | ------ | -------- | ----------------- | ------------------------------------------------------ |
| Action      | String | 是       | ModifyGroup       | 操作接口名，系统规定参数。取值：ModifyGroup            |
| Id          | String | 是       | 32388487739092994 | 空间ID。                                               |
| Name        | String | 否       | 视频监控          | 空间名称。                                             |
| Description | String | 否       | 视频监控          | 空间描述。                                             |
| Region      | String | 否       | cn-shanghai       | 空间所属区域，即服务中心。                             |
| InProtocol  | String | 否       | rtmp              | 空间使用的接入协议。取值：gb28181,rtmp                 |
| OutProtocol | String | 否       | rtmp,flv          | 空间使用的播放协议，多值用逗号分隔。取值：flv,hls,rtmp |
| Enabled     | Bool   | 否       | true              | 空间是否启用。                                         |
| LazyPull    | Bool   | 否       | false             | 是否启用按需拉流                                       |
| Callback    | String | 否       | my.callback.com   | 空间内设备状态更新时的回调                             |

**返回参数**

| 参数      | 类型   | 示例值                               | 描述             |
| --------- | ------ | ------------------------------------ | ---------------- |
| Id        | String | 32388487739092994                    | 空间ID。         |
| RequestId | String | BEA5625F-8FCF-48F4-851B-CA63946DA664 | 该条任务请求ID。 |

**示例**

**请求示例**

```
http://172.16.230.63?AccessKeyId=49e1dc48688592957a586bcd00109f67&Action=ModifyGroup&Callback=&Description=spaceDesc&Format=JSON&Id=1624424424523287&Name=spacenamenew&Signature=CH6K7M6Lrw13OkWognusFhsKCPQ%3D&SignatureMethod=HMAC-SHA1&SignatureNonce=53cb6926cd4d4ed896bbb10a8782e13a&SignatureVersion=1.0&Timestamp=2021-06-23T05%3A26%3A22Z&Version=2018-12-12
```

**返回示例**

```
{
    "Id":"1624424424523287",
    "RequestId":"3A30C690-93CA-E60E-D9F5-AC43496D5C6C"
}
```

####    (6) HaltGroup

**接口描述**
停用空间。

**请求参数**

| 参数   | 类型   | 是否必要 | 示例值            | 描述                                      |
| ------ | ------ | -------- | ----------------- | ----------------------------------------- |
| Action | String | 是       | HaltGroup         | 操作接口名，系统规定参数。取值：HaltGroup |
| Id     | String | 是       | 32388487739092994 | 空间ID。                                  |

**返回参数**

| 参数      | 类型   | 示例值                               | 描述             |
| --------- | ------ | ------------------------------------ | ---------------- |
| Id        | String | 32388487739092994                    | 空间ID。         |
| RequestId | String | BEA5625F-8FCF-48F4-851B-CA63946DA664 | 该条任务请求ID。 |

**示例**

**请求示例**

```
http://172.16.230.63?AccessKeyId=49e1dc48688592957a586bcd00109f67&Action=HaltGroup&Format=JSON&Id=1624424478602281&Signature=ide2HJyTJMQ2V%2B%2FrxKku%2F0LGMw0%3D&SignatureMethod=HMAC-SHA1&SignatureNonce=893896ec1d1d487fbfbe49bfe0ad06e7&SignatureVersion=1.0&Timestamp=2021-06-23T05%3A02%3A08Z&Version=2018-12-12
```

**返回示例**

```
{
    "RequestId":"BEA5625F-8FCF-48F4-851B-CA63946DA664",
    "Id":"32388487739092994 "
}
```

####    (7) EnableGroup

**接口描述**
启用空间。

**请求参数**

| 参数   | 类型   | 是否必要 | 示例值            | 描述                                        |
| ------ | ------ | -------- | ----------------- | ------------------------------------------- |
| Action | String | 是       | EnableGroup       | 操作接口名，系统规定参数。取值：EnableGroup |
| Id     | String | 是       | 32388487739092994 | 空间ID。                                    |

**返回参数**

| 参数      | 类型   | 示例值                               | 描述             |
| --------- | ------ | ------------------------------------ | ---------------- |
| Id        | String | 32388487739092994                    | 空间ID。         |
| RequestId | String | BEA5625F-8FCF-48F4-851B-CA63946DA664 | 该条任务请求ID。 |

**示例**

**请求示例**

```
http://172.16.230.63?AccessKeyId=49e1dc48688592957a586bcd00109f67&Action=EnableGroup&Format=JSON&Id=1624428048761368&Signature=Thm186qm5FRivRx2mn%2FeRoRqqNc%3D&SignatureMethod=HMAC-SHA1&SignatureNonce=2d13ea1c75f14d36a66893cce2a9dfe6&SignatureVersion=1.0&Timestamp=2021-06-23T06%3A01%3A14Z&Version=2018-12-12
```

**返回示例**

```
{    "RequestId": "BEA5625F-8FCF-48F4-851B-CA63946DA664",    "Id": "32388487739092994 "}
```

####    (8) CreateRtmpGroupStreamurl

**接口描述**
RTMP推流空间创建单条推流地址。

**请求参数**

| 参数       | 类型   | 是否必要 | 示例值                       | 描述                                                     |
| ---------- | ------ | -------- | ---------------------------- | -------------------------------------------------------- |
| Action     | String | 是       | CreateRtmpGroupStreamurl     | 操作接口名，系统规定参数。取值：CreateRtmpGroupStreamurl |
| Id         | String | 是       | 32388487739092994            | 空间ID。                                                 |
| Name       | String | 是       | test                         | 流名称。                                                 |
| AccessInfo | String | 是       | {"key":"111","secret":"111"} | 桶信息。                                                 |

**返回参数**

| 参数      | 类型   | 示例值                                  | 描述             |
| --------- | ------ | --------------------------------------- | ---------------- |
| Id        | String | 32388487739092994                       | 空间ID。         |
| PushUrl   | String | rtmp://49.4.91.39/live/1600683622764799 | 推流地址。       |
| RequestId | String | BEA5625F-8FCF-48F4-851B-CA63946DA664    | 该条任务请求ID。 |

**示例**

**请求示例**

```
http://172.16.230.63?AccessInfo=%7B%22AccessKeyId%22%3A%222LAC00JZ1G2GCHIHWQL2%22%2C%22AccessKeySecret%22%3A%22H2OdNC4IPIIaku45EcTA0LEMulD1ezYaIUKCyocr%22%7D&AccessKeyId=49e1dc48688592957a586bcd00109f67&Action=CreateRtmpGroupStreamurl&Format=JSON&Id=1624424478602281&Name=21&Signature=NwKrXaVGi8m4g9Qjz18ox%2FKMUeA%3D&SignatureMethod=HMAC-SHA1&SignatureNonce=9322f081d4ca4a01bc80263e1c67cb08&SignatureVersion=1.0&Timestamp=2021-06-23T05%3A02%3A41Z&Version=2018-12-12
```

**返回示例**

```
{    "Id": "32388487739092994 ",    "PushUrl": "rtmp://49.4.91.39/live/1600683622764799",    "RequestId": "BEA5625F-8FCF-48F4-851B-CA63946DA664"}
```

####    (9) CreateRtmpGroupStreamurls

**接口描述**
RTMP推流空间批量创建推流地址。

**请求参数**

| 参数       | 类型   | 是否必要 | 示例值                       | 描述                                                      |
| ---------- | ------ | -------- | ---------------------------- | --------------------------------------------------------- |
| Action     | String | 是       | CreateRtmpGroupStreamurl     | 操作接口名，系统规定参数。取值：CreateRtmpGroupStreamurls |
| Id         | String | 是       | 32388487739092994            | 空间ID。                                                  |
| Name       | String | 是       | test                         | 流名称。                                                  |
| AccessInfo | String | 是       | {"key":"111","secret":"111"} | 桶信息。                                                  |

**返回参数**

| 参数      | 类型     | 示例值                               | 描述             |
| --------- | -------- | ------------------------------------ | ---------------- |
| Results   | Result[] | Result[]                             | 推流地址列表。   |
| RequestId | String   | BEA5625F-8FCF-48F4-851B-CA63946DA664 | 该条任务请求ID。 |

**Device类型**

| 参数    | 类型   | 示例值                                  | 描述       |
| ------- | ------ | --------------------------------------- | ---------- |
| Id      | String | 32388487739092994                       | 空间ID。   |
| PushUrl | String | rtmp://49.4.91.39/live/1600683622764799 | 推流地址。 |

**示例**

**请求示例**

```
http://172.16.230.63?AccessInfo=%7B%22AccessKeyId%22%3A%222LAC00JZ1G2GCHIHWQL2%22%2C%22AccessKeySecret%22%3A%22H2OdNC4IPIIaku45EcTA0LEMulD1ezYaIUKCyocr%22%7D&AccessKeyId=49e1dc48688592957a586bcd00109f67&Action=CreateRtmpGroupStreamurls&Format=JSON&Id=1624428048761368&Name=%5B%2245645%22%2C%224454%22%5D&Signature=dSq8YQKdkK2Bavw9T03iMNdRQw0%3D&SignatureMethod=HMAC-SHA1&SignatureNonce=7260be955e1245a19c6b7aa85cc9ca0c&SignatureVersion=1.0&Timestamp=2021-06-23T06%3A02%3A30Z&Version=2018-12-12
```

**返回示例**

```json
{
    "Results":[
        {
            "Id":"1624428048761368",
            "PushUrl":"rtmp://221.176.54.76:1935/live/1624428150544871"
        },
        {
            "Id":"1624428048761368",
            "PushUrl":"rtmp://221.176.54.76:1935/live/1624428150548159"
        }
    ],
    "RequestId":"BD6D41E3-77FB-049A-B4B6-F977780B08A1"
}
```

### 2、设备操作接口

####    (1) DescribeDevices

**接口描述**
获取设备列表。

**请求参数**

| 参数             | 类型   | 是否必要 | 示例值               | 描述                                                         |
| ---------------- | ------ | -------- | -------------------- | ------------------------------------------------------------ |
| Action           | String | 是       | DescribeDevices      | 操作接口名，系统规定参数。取值：DescribeDevices。            |
| GroupId          | String | 是       | 32388487739092994    | 按设备所属空间id查询。                                       |
| GbId             | String | 否       | 34020000001320000006 | 按设备国标id查询。                                           |
| Name             | String | 否       | xxx                  | 按设备名称查询。                                             |
| ParentId         | String | 否       | 32388487739092995    | 按设备所属上级设备ID。                                       |
| Type             | String | 否       | ipc                  | 按设备类型查询。取值：ipc(摄像头),platform(平台),ied(智能设备)。 |
| Status           | String | 否       | on                   | 按设备状态查询。取值：on(在线),off(离线),failed(锁定),new(未注册)。 |
| SortBy           | String | 否       | id                   | 按给定字段排序，默认按ID排序。                               |
| SortDirection    | String | 否       | asc                  | 排序方式，默认升序。取值：asc(升序),desc(降序)。             |
| PageSize         | Int    | 否       | 20                   | 分页大小，默认为20。                                         |
| PageNum          | Int    | 否       | 1                    | 第几个分页，默认为1。                                        |
| IncludeStats     | Bool   | 否       | false                | 是否返回流统计信息，默认false。                              |
| IncludeDirectory | Bool   | 否       | false                | 是否返回目录信息，默认false。                                |

**返回参数**

| 参数       | 类型     | 示例值                               | 描述             |
| ---------- | -------- | ------------------------------------ | ---------------- |
| PageSize   | Int      | 20                                   | 分页大小。       |
| PageNum    | Int      | 1                                    | 第几个分页。     |
| PageCount  | Int      | 5                                    | 分页总数。       |
| TotalCount | Int      | 100                                  | 设备总数。       |
| Devices    | Device[] | Device[]                             | 设备列表。       |
| RequestId  | String   | BEA5625F-8FCF-48F4-851B-CA63946DA664 | 该条任务请求ID。 |

**Device类型**

| 参数        | 类型      | 示例值               | 描述                                                         |
| ----------- | --------- | -------------------- | ------------------------------------------------------------ |
| Id          | String    | 32388487739092996    | 设备ID。                                                     |
| Name        | String    | xxx路口摄像头        | 设备名称。                                                   |
| Description | String    | xxx路口摄像头        | 设备描述。                                                   |
| GroupId     | String    | 32388487739092994    | 设备所属空间ID。                                             |
| ParentId    | String    | 32388487739092995    | 上级设备ID，比如摄像头所属的平台ID。                         |
| Type        | String    | ipc                  | 设备类型。取值：ipc(摄像头),platform(平台),ied(智能设备)。   |
| AutoStart   | Bool      | false                | 是否自动启动流，默认false。                                  |
| Enabled     | Bool      | true                 | 是否启用设备，默认true。                                     |
| Protocol    | String    | gb28181              | 设备协议。取值：gb28181                                      |
| Status      | String    | on                   | 设备状态。取值：on(在线),off(离线),failed(锁定),new(未注册)。 |
| GbId        | String    | 31000000000000000002 | 设备国标ID。（仅适用于国标协议）                             |
| Ip          | String    | 2.2.2.2              | 设备IP。                                                     |
| Port        | Int       | 8080                 | 设备端口。                                                   |
| Username    | String    | admin                | 设备用户名。                                                 |
| Password    | String    | admin                | 设备密码。                                                   |
| Vendor      | String    | dahua                | 设备厂商。                                                   |
| Longitude   | String    | 45.00                | 设备经度。                                                   |
| Latitude    | String    | 119.20               | 设备维度。                                                   |
| AutoPos     | Bool      | false                | 是否启用设备位置订阅。                                       |
| PosInterval | Int       | 300                  | 位置订阅周期，单位秒。                                       |
| AlarmMethod | String    | 0                    | 订阅的国标报警方式，多值用逗号分隔。取值：0(全部),5(视频报警),7(其他报警),空值表示不订阅。 |
| CreatedTime | String    | 2019-02-28T17:00:17Z | 设备创建时间。                                               |
| Params      | String    | {}                   | 设备其他参数。                                               |
| Stats       | Stat      |                      | 设备流统计信息。                                             |
| Directory   | Directory |                      | 目录信息。                                                   |

**Stat类型**

| 参数       | 类型 | 示例值 | 描述         |
| ---------- | ---- | ------ | ------------ |
| ChannelNum | Int  | 0      | 通道数量。   |
| StreamNum  | Int  | 0      | 流数量。     |
| OnlineNum  | Int  | 0      | 在线流数量。 |
| OfflineNum | Int  | 0      | 离线流数量。 |
| FailedNum  | Int  | 0      | 失败流数量。 |

**Directory类型**

| 参数        | 类型   | 示例值               | 描述             |
| ----------- | ------ | -------------------- | ---------------- |
| Id          | String | 32388487739092994    | 目录ID。         |
| Name        | String | 目录1                | 目录名称。       |
| Description | String | 目录1                | 目录描述。       |
| GroupId     | String | 32388487739092994    | 目录所属空间ID。 |
| ParentId    | String | 32388487739092995    | 上级目录ID。     |
| CreatedTime | String | 2019-02-28T17:00:17Z | 目录创建时间。   |

**示例**

**请求示例**

```
http://172.16.230.63?AccessKeyId=49e1dc48688592957a586bcd00109f67&Action=DescribeDevices&Format=JSON&GroupId=1624424478602281&IncludeStats=true&Name=&PageNum=1&PageSize=20&Signature=gnET0L10I2mQAO8swCnr%2B81CzFQ%3D&SignatureMethod=HMAC-SHA1&SignatureNonce=8aa9a1de6266421a83d3879fa672e334&SignatureVersion=1.0&Status=&Timestamp=2021-06-23T05%3A02%3A55Z&Version=2018-12-12
```

**返回示例**

```
{
    "RequestId": "BEA5625F-8FCF-48F4-851B-CA63946DA664",
    "PageSize": 20,
    "PageNum": 1,
    "PageCount": 5,
	"TotalCount": 100,
    "Devices": [
        {
            "Id": "32388487739092996 ",
            "Name": "xxx路口摄像头",
            "Description": "xxx路口摄像头",
            "GroupId": "32388487739092994",
            "ParentId": "32388487739092995",
            "Type": "ipc",
            "AutoStart": true,
            "Enabled": true,
            "Protocol": "gb28181",
            "Status": "on",
            "GbId": "31000000000000000002 ",
            "Ip": "2.2.2.2",
            "Username": "admin",
            "Password": "admin",
            "CreatedTime": "2018-12-10T17:00:00Z"
        }
    ]
}
```

####    (2) DescribeDevice

**接口描述**
查询设备信息。

**请求参数**

| 参数             | 类型   | 是否必要 | 示例值            | 描述                                             |
| ---------------- | ------ | -------- | ----------------- | ------------------------------------------------ |
| Action           | String | 是       | DescribeDevice    | 操作接口名，系统规定参数。取值：DescribeDevice。 |
| Id               | String | 是       | 32388487739092996 | 设备ID。                                         |
| IncludeStats     | Bool   | 否       | false             | 是否返回流统计信息，默认false。                  |
| IncludeDirectory | Bool   | 否       | false             | 是否返回目录信息，默认false。                    |

**返回参数**

| 参数        | 类型      | 示例值                               | 描述                                                         |
| ----------- | --------- | ------------------------------------ | ------------------------------------------------------------ |
| Id          | String    | 32388487739092996                    | 设备ID。                                                     |
| Name        | String    | xxx路口摄像头                        | 设备名称。                                                   |
| Description | String    | xxx路口摄像头                        | 设备描述。                                                   |
| GroupId     | String    | 32388487739092994                    | 设备所属空间ID。                                             |
| ParentId    | String    | 32388487739092995                    | 上级设备ID，比如摄像头所属的平台ID。                         |
| DirectoryId | String    | 32388487739092994                    | 目录ID。                                                     |
| Type        | String    | ipc                                  | 设备类型。取值：ipc(摄像头),platform(平台),ied(智能设备)。   |
| AutoStart   | Bool      | false                                | 是否自动启动流。                                             |
| Enabled     | Bool      | true                                 | 设备是否启用。                                               |
| Status      | String    | on                                   | 设备状态。取值：on(在线),off(离线),failed(锁定),new(未注册)。 |
| GbId        | String    | 31000000000000000002                 | 设备国标ID（仅适用于国标协议）。                             |
| Ip          | String    | 2.2.2.2                              | 设备IP。                                                     |
| Port        | Int       | 8080                                 | 设备端口。                                                   |
| Username    | String    | admin                                | 设备用户名。                                                 |
| Password    | String    | admin                                | 设备密码。                                                   |
| Vendor      | String    | dahua                                | 设备厂商。                                                   |
| Longitude   | String    | 45.00                                | 设备经度。                                                   |
| Latitude    | String    | 119.20                               | 设备维度。                                                   |
| AutoPos     | Bool      | false                                | 是否启用设备位置订阅。                                       |
| PosInterval | Int       | 300                                  | 位置订阅周期，单位秒。                                       |
| AlarmMethod | String    | 5                                    | 订阅的国标报警方式，多值用逗号分隔。取值：0(全部),5(视频报警),7(其他报警),空值表示不订阅。 |
| CreatedTime | String    | 2019-02-28T17:00:17Z                 | 设备创建时间。                                               |
| Params      | String    | {}                                   | 设备其他参数。                                               |
| Stats       | Stat      |                                      | 设备流统计信息。                                             |
| Directory   | Directory |                                      | 目录信息。                                                   |
| RequestId   | String    | BEA5625F-8FCF-48F4-851B-CA63946DA664 | 该条任务请求ID。                                             |

**Stat类型**

| 参数       | 类型 | 示例值 | 描述         |
| ---------- | ---- | ------ | ------------ |
| ChannelNum | Int  | 1      | 通道数量。   |
| StreamNum  | Int  | 1      | 流数量。     |
| OnlineNum  | Int  | 1      | 在线流数量。 |
| OfflineNum | Int  | 1      | 离线流数量。 |
| FailedNum  | Int  | 1      | 失败流数量。 |

**Directory类型**

| 参数        | 类型   | 示例值               | 描述             |
| ----------- | ------ | -------------------- | ---------------- |
| Id          | String | 32388487739092994    | 目录ID。         |
| Name        | String | 目录1                | 目录名称。       |
| Description | String | 目录1                | 目录描述。       |
| GroupId     | String | 32388487739092994    | 目录所属空间ID。 |
| ParentId    | String | 32388487739092995    | 上级目录ID。     |
| CreatedTime | String | 2019-02-28T17:00:17Z | 目录创建时间。   |

**示例**

**请求示例**

```
http://www.xxxxxx.com?Action=DescribeDevice&Id=32388487739092996&<公共请求参数>
```

**返回示例**

```
{
    "RequestId": "BEA5625F-8FCF-48F4-851B-CA63946DA664",
    "Id": "32388487739092996",
    "Name": "xxx路口摄像头",
    "Description": "xxx路口摄像头",
    "GroupId": "32388487739092994 ",
    "ParentId": "32388487739092995 ",
    "Type": "ipc",
    "AutoStart": true,
    "Enabled": true,
    "Protocol": "gb28181",
    "Status": "on",
    "GbId": "31000000000000000002 ",
    "Ip": "2.2.2.2",
	"Port": 8080,
    "Username": "admin",
    "Password": "admin",
    "CreatedTime": "2018-12-10T17:00:00Z"
}
```

####    (3) BatchDeleteDevices

**接口描述**
批量删除设备。

> 需先对对应的设备停止拉流。

**请求参数**

| 参数   | 类型   | 是否必要 | 示例值             | 描述                                               |
| ------ | ------ | -------- | ------------------ | -------------------------------------------------- |
| Action | String | 是       | BatchDeleteDevices | 操作接口名，系统规定参数。取值：BatchDeleteDevices |
| Id     | String | 是       | 32388487739092996  | 设备ID，多值用逗号分隔。                           |

**返回参数**

| 参数      | 类型     | 示例值                               | 描述             |
| --------- | -------- | ------------------------------------ | ---------------- |
| Results   | Result[] |                                      | 结果列表。       |
| RequestId | String   | BEA5625F-8FCF-48F4-851B-CA63946DA664 | 该条任务请求ID。 |

**Result类型**

| 参数  | 类型   | 示例值            | 描述                             |
| ----- | ------ | ----------------- | -------------------------------- |
| Id    | String | 32388487739092996 | 设备ID。                         |
| Error | String | Device not found  | 设备错误信息。（仅在出错时存在） |

**示例**

**请求示例**

```
http://www.xxxxxxx.com?Action=BatchDeleteDevices&Id=32388487739092996&<公共请求参数>
```

**返回示例**

```
{
    "RequestId": "BEA5625F-8FCF-48F4-851B-CA63946DA664",
    "Results": [
        {
            "Id": "32388487739092996"
        }
    ]
}
```

####    (4) BatchStartDevices

**接口描述**
批量启动设备拉流。

**请求参数**

| 参数       | 类型   | 是否必要 | 示例值            | 描述                                              |
| ---------- | ------ | -------- | ----------------- | ------------------------------------------------- |
| Action     | String | 是       | BatchStartDevices | 操作接口名，系统规定参数。取值：BatchStartDevices |
| Id         | String | 是       | 32388487739092996 | 设备ID，多值用逗号分隔。                          |
| AccessInfo | String | 是       | xxxx              | 桶的密钥对信息。                                  |

**返回参数**

| 参数      | 类型     | 示例值                               | 描述             |
| --------- | -------- | ------------------------------------ | ---------------- |
| Results   | Result[] |                                      | 结果列表。       |
| RequestId | String   | BEA5625F-8FCF-48F4-851B-CA63946DA664 | 该条任务请求ID。 |

**Result类型**

| 参数    | 类型     | 示例值            | 描述                               |
| ------- | -------- | ----------------- | ---------------------------------- |
| Id      | String   | 32388487739092996 | 设备ID。                           |
| Error   | String   | 设备信息不存在    | 设备的错误信息。（仅在出错时存在） |
| Streams | Stream[] |                   | 设备流列表。                       |

**Stream类型**

| 参数  | 类型   | 示例值            | 描述                             |
| ----- | ------ | ----------------- | -------------------------------- |
| Id    | String | 32388487739092997 | 流ID。                           |
| Error | String | Stream not found  | 流的错误信息。（仅在出错时存在） |

**示例**

**请求示例**

```
http://www.xxxxxx.com?Action=BatchStartDevices&Id=32388487739092996&<公共请求参数>
```

**返回示例**

```
{
    "RequestId":"BEA5625F-8FCF-48F4-851B-CA63946DA664",
    "Results":[
        {
            "Id":"32388487739092996",
            "Streams":[
                {
                    "Id":"32388487739092997"
                }
            ]
        }
    ]
}
```

####    (5) BatchStopDevices

**接口描述**
批量停止设备拉流。

**请求参数**

| 参数   | 类型   | 是否必要 | 示例值            | 描述                                             |
| ------ | ------ | -------- | ----------------- | ------------------------------------------------ |
| Action | String | 是       | BatchStopDevices  | 操作接口名，系统规定参数。取值：BatchStopDevices |
| Id     | String | 是       | 32388487739092996 | 设备ID，多值用逗号分隔。                         |

**返回参数**

| 参数      | 类型     | 示例值                               | 描述             |
| --------- | -------- | ------------------------------------ | ---------------- |
| Results   | Result[] |                                      | 结果列表。       |
| RequestId | String   | BEA5625F-8FCF-48F4-851B-CA63946DA664 | 该条任务请求ID。 |

**Result类型**

| 参数    | 类型     | 示例值            | 描述                               |
| ------- | -------- | ----------------- | ---------------------------------- |
| Id      | String   | 32388487739092996 | 设备ID。                           |
| Error   | String   | 设备信息不存在    | 设备的错误信息。（仅在出错时存在） |
| Streams | Stream[] |                   | 设备流列表。                       |

**Stream类型**

| 参数  | 类型   | 示例值            | 描述                             |
| ----- | ------ | ----------------- | -------------------------------- |
| Id    | String | 32388487739092997 | 流ID。                           |
| Error | String | Stream not found  | 流的错误信息。（仅在出错时存在） |

**示例**

**请求示例**

```
http://www.xxxxxx.com?Action=BatchStopDevices&Id=32388487739092996&<公共请求参数>
```

**返回示例**

```
{
    "RequestId": "BEA5625F-8FCF-48F4-851B-CA63946DA664",
    "Results": [
        {
            "Id": "32388487739092996",
            "Streams": [
                {
                    "Id": "32388487739092997"
                }
            ]
        }
    ]
}
```

####    (6) ModifyDevice

**接口描述**
修改设备信息。

**请求参数**

| 参数        | 类型   | 是否必要 | 示例值               | 描述                                                         |
| ----------- | ------ | -------- | -------------------- | ------------------------------------------------------------ |
| Action      | String | 是       | ModifyDevice         | 操作接口名，系统规定参数。取值：ModifyDevice                 |
| Id          | String | 是       | 32388487739092996    | 设备ID。                                                     |
| GroupId     | String | 是       | 32388487739092994    | 设备所属空间ID。                                             |
| Name        | String | 否       | xxx路口摄像头        | 设备名称。                                                   |
| Description | String | 否       | xxx路口摄像头        | 设备描述。                                                   |
| Type        | String | 否       | ipc                  | 设备类型。取值：ipc(摄像头),platform(平台),ied(智能设备)     |
| AutoStart   | Bool   | 否       | false                | 是否自动启动流，默认false。                                  |
| GbId        | String | 否       | 31000000000000000002 | 设备国标ID。（仅适用于国标协议）                             |
| DirectoryId | String | 否       | 32388487739092994    | 设备所属目录ID。                                             |
| Ip          | String | 否       | 2.2.2.2              | 设备IP地址。                                                 |
| Port        | Int    | 否       | 8080                 | 设备端口。                                                   |
| Username    | String | 否       | admin                | 设备用户名。                                                 |
| Password    | String | 否       | admin                | 设备密码。                                                   |
| Vendor      | String | 否       | dahua                | 设备厂商。                                                   |
| Longitude   | String | 否       | 45.00                | 设备经度。                                                   |
| Latitude    | String | 否       | 119.20               | 设备维度。                                                   |
| AutoPos     | Bool   | 否       | false                | 是否启用设备位置订阅，默认false。                            |
| PosInterval | Int    | 否       | 300                  | 位置订阅周期，单位秒。                                       |
| AlarmMethod | String | 否       | 0                    | 订阅的国标报警方式，多值用逗号分隔。取值：0(全部),5(视频报警),7(其他报警),空值表示不订阅。 |
| Params      | String | 否       | {}                   | 设备其他参数, 格式为JSON序列化的字符串。                     |

**返回参数**

| 参数      | 类型   | 示例值                               | 描述             |
| --------- | ------ | ------------------------------------ | ---------------- |
| Id        | String | 32388487739092996                    | 设备ID。         |
| RequestId | String | BEA5625F-8FCF-48F4-851B-CA63946DA664 | 该条任务请求ID。 |

**示例**

**请求示例**

```
http://www.xxxxxx.com?Action=ModifyDevice&Id=32388487739092996 &Name=徐家汇路口&<公共请求参数>
```

**返回示例**

```
{    "RequestId": "BEA5625F-8FCF-48F4-851B-CA63946DA664",    "Id": "32388487739092996 "}
```

####    (7) DeleteDevice

**接口描述**
删除设备。

> 如果在拉流，需先停止设备拉流再删除。

**请求参数**

| 参数   | 类型   | 是否必要 | 示例值            | 描述                                         |
| ------ | ------ | -------- | ----------------- | -------------------------------------------- |
| Action | String | 是       | DeleteDevice      | 操作接口名，系统规定参数。取值：DeleteDevice |
| Id     | String | 是       | 32388487739092996 | 设备ID。                                     |

**返回参数**

| 参数      | 类型   | 示例值                               | 描述             |
| --------- | ------ | ------------------------------------ | ---------------- |
| RequestId | String | BEA5625F-8FCF-48F4-851B-CA63946DA664 | 该条任务请求ID。 |

**示例**

**请求示例**

```
http://www.xxxxxx.com?Action=DeleteDevice&Id=32388487739092996&<公共请求参数>
```

**返回示例**

```
{    "RequestId": "BEA5625F-8FCF-48F4-851B-CA63946DA664"}
```

####    (8) CreateDevice

**接口描述**
添加新的设备。

**请求参数**

| 参数        | 类型   | 是否必要 | 示例值               | 描述                                                         |
| ----------- | ------ | -------- | -------------------- | ------------------------------------------------------------ |
| Action      | String | 是       | CreateDevice         | 操作接口名，系统规定参数。取值：CreateDevice                 |
| Name        | String | 否       | xxx路口摄像头        | 设备名称。                                                   |
| Description | String | 否       | xxx路口摄像头        | 设备描述。                                                   |
| GroupId     | String | 是       | 32388487739092994    | 设备所属空间ID。                                             |
| ParentId    | String | 否       | 32388487739092995    | 上级设备ID，比如摄像头所属的平台ID。                         |
| DirectoryId | String | 否       | 32388487739092994    | 设备所属目录ID。                                             |
| Type        | String | 是       | ipc                  | 设备类型。取值：ipc(摄像头),platform(平台),ied(智能设备)     |
| AutoStart   | Bool   | 否       | false                | 是否自动启动流，默认false。                                  |
| GbId        | String | 是       | 31000000000000000002 | 设备国标ID。（仅适用于国标协议）                             |
| Ip          | String | 否       | 2.2.2.2              | 设备IP。                                                     |
| Port        | Int    | 否       | 8080                 | 设备端口。                                                   |
| Username    | String | 是       | admin                | 设备用户名。                                                 |
| Password    | String | 是       | admin                | 设备密码。                                                   |
| Vendor      | String | 否       | dahua                | 设备厂商。                                                   |
| Longitude   | String | 否       | 45.00                | 设备经度。                                                   |
| Latitude    | String | 否       | 119.20               | 设备维度。                                                   |
| AutoPos     | Bool   | 否       | false                | 是否启用设备位置订阅，默认false。                            |
| PosInterval | Int    | 否       | 300                  | 位置订阅周期，单位秒。                                       |
| AlarmMethod | String | 否       | 5                    | 订阅的国标报警方式，多值用逗号分隔。取值：0(全部),5(视频报警),7(其他报警),空值表示不订阅。 |
| Params      | String | 否       | {}                   | 设备其他参数，格式为JSON序列化的字符串。                     |

**返回参数**

| 参数      | 类型   | 示例值                               | 描述             |
| --------- | ------ | ------------------------------------ | ---------------- |
| Id        | String | 32388487739092996                    | 设备ID。         |
| RequestId | String | BEA5625F-8FCF-48F4-851B-CA63946DA664 | 该条任务请求ID。 |

**示例**

**请求示例**

```
http://www.xxxxxx.com?Action=CreateDevice&Name=xxx路口摄像头&GroupId=32388487739092994&Type=ipc&<公共请求参数>
```

**返回示例**

```
{    "RequestId": "BEA5625F-8FCF-48F4-851B-CA63946DA664",    "Id": "32388487739092996"}
```

####    (9) StartDevice

**接口描述**
启动设备拉流，会启动设备上的所有流。

> 目前每个设备仅支持单路流，效果等同于StartStream。

**请求参数**

| 参数       | 类型   | 是否必要 | 示例值            | 描述                                        |
| ---------- | ------ | -------- | ----------------- | ------------------------------------------- |
| Action     | String | 是       | StartDevice       | 操作接口名，系统规定参数。取值：StartDevice |
| Id         | String | 是       | 32388487739092996 | 设备ID。                                    |
| AccessInfo | String | 是       | xxxx              | 桶的密钥对信息。                            |

**返回参数**

| 参数      | 类型   | 示例值                               | 描述             |
| --------- | ------ | ------------------------------------ | ---------------- |
| Id        | String | 32388487739092996                    | 设备ID。         |
| RequestId | String | BEA5625F-8FCF-48F4-851B-CA63946DA664 | 该条任务请求ID。 |

**示例**

**请求示例**

```
http://www.xxxxxx.com?Action=StartDevice&Id=32388487739092996&<公共请求参数>
```

**返回示例**

```
{    "RequestId": "BEA5625F-8FCF-48F4-851B-CA63946DA664",    "Id": "32388487739092996"}
```

####    (10) StopDevice

**接口描述**
停止设备拉流，会停止设备上的所有流。

> 目前每个设备仅支持单路流，效果等同于StopStream。

**请求参数**

| 参数   | 类型   | 是否必要 | 示例值            | 描述                                       |
| ------ | ------ | -------- | ----------------- | ------------------------------------------ |
| Action | String | 是       | StopDevice        | 操作接口名，系统规定参数。取值：StopDevice |
| Id     | String | 是       | 32388487739092996 | 设备ID。                                   |

**返回参数**

| 参数      | 类型   | 示例值                               | 描述             |
| --------- | ------ | ------------------------------------ | ---------------- |
| Id        | String | 32388487739092996                    | 设备ID。         |
| RequestId | String | BEA5625F-8FCF-48F4-851B-CA63946DA664 | 该条任务请求ID。 |

**示例**

**请求示例**

```
http://www.xxxxxx.com?Action=StopDevice&Id=32388487739092996&<公共请求参数>
```

**返回示例**

```
{
    "RequestId": "BEA5625F-8FCF-48F4-851B-CA63946DA664",
    "Id": "32388487739092996"
}
```

####    (11) UnlockDevice

**接口描述**
解锁设备。

**请求参数**

| 参数   | 类型   | 是否必要 | 示例值       | 描述                                         |
| ------ | ------ | -------- | ------------ | -------------------------------------------- |
| Action | String | 是       | UnlockDevice | 操作接口名，系统规定参数。取值：UnlockDevice |
| Id     | String | 是       | 200001       | 设备ID。                                     |

**返回参数**

| 参数      | 类型   | 示例值                               | 描述             |
| --------- | ------ | ------------------------------------ | ---------------- |
| Id        | String | 200001                               | 设备ID。         |
| RequestId | String | BEA5625F-8FCF-48F4-851B-CA63946DA664 | 该条任务请求ID。 |

**示例**

**请求示例**

```
http://www.xxxxxx.com?Action=UnlockDevice&Id=200001&<公共请求参数>
```

**返回示例**

```
{    "RequestId": "BEA5625F-8FCF-48F4-851B-CA63946DA664",    "Id": "200001"}
```

### 3、设备通道操作接口

####    (1) DescribeDeviceChannels

**接口描述**
获取设备通道列表。

**请求参数**

| 参数     | 类型   | 是否必要 | 示例值                 | 描述                                                   |
| -------- | ------ | -------- | ---------------------- | ------------------------------------------------------ |
| Action   | String | 是       | DescribeDeviceChannels | 操作接口名，系统规定参数。取值：DescribeDeviceChannels |
| Id       | String | 是       | 600001                 | 按设备ID查询                                           |
| Status   | String | 否       | on                     | 按设备状态查询                                         |
| Name     | String | 否       | 通道1                  | 按通道名称模糊查询                                     |
| PageSize | Int    | 否       | 2                      | 分页大小，默认为20                                     |
| PageNum  | Int    | 否       | 1                      | 第几个分页，默认为1                                    |

**返回参数**

| 参数       | 类型      | 示例值                               | 描述             |
| ---------- | --------- | ------------------------------------ | ---------------- |
| PageSize   | Int       | 20                                   | 分页大小         |
| PageNum    | Int       | 1                                    | 第几个分页       |
| PageCount  | Int       | 1                                    | 分页总数         |
| TotalCount | Int       | 1                                    | 通道总数         |
| Channels   | Channel[] |                                      | 通道列表         |
| RequestId  | String    | 4641C72D-462E-4AEA-8485-FC267AF90B0A | 该条任务请求ID。 |

**Channel类型**

| 参数         | 类型   | 示例值 | 描述       |
| ------------ | ------ | ------ | ---------- |
| Id           | int    | 101    | 通道标识ID |
| Name         | String | 通道1  | 通道名称   |
| GbId         | String | 400001 | 国标ID     |
| StreamId     | String | 300001 | 流ID       |
| StreamStatus | String | off    | 流状态     |
| DeviceId     | String | 600001 | 设备ID     |
| DeviceStatus | String | on     | 设备状态   |

**示例**

**请求示例**

```
http://www.xxxxxx.com?Action=DescribeDeviceChannels&Id=600001&<公共请求参数>
```

**返回示例**

```
{
    "PageCount": 1,
    "Channels": [
        {
            "Id": "通道1",
            "Name": "通道1",
            "GbId": "400001",
            "StreamId": "300001",
            "StreamStatus": "off",
            "DeviceId": "600001",
            "DeviceStatus": "on",
        }
    ],
    "TotalCount": 1,
    "PageSize": 20,
    "RequestId": "4641C72D-462E-4AEA-8485-FC267AF90B0A",
    "PageNum": 1
}
```

####    (2) DeleteChannel

**接口描述**
删除通道。

> 如果在拉流，需先停止通道拉流再删除。

**请求参数**

| 参数   | 类型   | 是否必要 | 示例值        | 描述                                          |
| ------ | ------ | -------- | ------------- | --------------------------------------------- |
| Action | String | 是       | DeleteChannel | 操作接口名，系统规定参数。取值：DeleteChannel |
| Id     | int    | 是       | 101           | 通道ID。                                      |

**返回参数**

| 参数      | 类型   | 示例值                               | 描述             |
| --------- | ------ | ------------------------------------ | ---------------- |
| RequestId | String | BEA5625F-8FCF-48F4-851B-CA63946DA664 | 该条任务请求ID。 |

**示例**

**请求示例**

```
http://www.xxxxxx.com?Action=DeleteChannel&Id=101&<公共请求参数>
```

**返回示例**

```
{    "RequestId": "BEA5625F-8FCF-48F4-851B-CA63946DA664"}
```

####    (3) BatchDeleteChannels

**接口描述**
批量删除通道。

> 需先对对应的通道停止拉流。

**请求参数**

| 参数   | 类型   | 是否必要 | 示例值              | 描述                                                |
| ------ | ------ | -------- | ------------------- | --------------------------------------------------- |
| Action | String | 是       | BatchDeleteChannels | 操作接口名，系统规定参数。取值：BatchDeleteChannels |
| Id     | String | 是       | 101,102             | 通道ID，多值用逗号分隔。                            |

**返回参数**

| 参数      | 类型     | 示例值                               | 描述             |
| --------- | -------- | ------------------------------------ | ---------------- |
| Results   | Result[] |                                      | 结果列表。       |
| RequestId | String   | BEA5625F-8FCF-48F4-851B-CA63946DA664 | 该条任务请求ID。 |

**Result类型**

| 参数  | 类型   | 示例值           | 描述                             |
| ----- | ------ | ---------------- | -------------------------------- |
| Id    | int    | 101              | 通道ID。                         |
| Error | String | Device not found | 设备错误信息。（仅在出错时存在） |

**示例**

**请求示例**

```
http://www.xxxxxxx.com?Action=BatchDeleteChannels&Id=101,102&<公共请求参数>
```

**返回示例**

```
{
    "RequestId": "BEA5625F-8FCF-48F4-851B-CA63946DA664",
    "Results": [
        {
            "Id": "101"
        }
    ]
}
```

####    (4) StartChannel

**接口描述**
启动通道拉流。

>效果等同于StartDevice。

**请求参数**

| 参数       | 类型   | 是否必要 | 示例值       | 描述                                         |
| ---------- | ------ | -------- | ------------ | -------------------------------------------- |
| Action     | String | 是       | StartChannel | 操作接口名，系统规定参数。取值：StartChannel |
| Id         | int    | 是       | 101          | 通道ID。                                     |
| AccessInfo | String | 是       | xxxx         | 桶的密钥对信息。                             |

**返回参数**

| 参数      | 类型   | 示例值                               | 描述             |
| --------- | ------ | ------------------------------------ | ---------------- |
| Id        | int    | 101                                  | 通道ID。         |
| RequestId | String | BEA5625F-8FCF-48F4-851B-CA63946DA664 | 该条任务请求ID。 |

**示例**

**请求示例**

```
http://www.xxxxxx.com?Action=StartChannel&Id=101&<公共请求参数>
```

**返回示例**

```
{    "RequestId": "BEA5625F-8FCF-48F4-851B-CA63946DA664",    "Id": "101"}
```

####    (5) StopChannel

**接口描述**
停止通道拉流。

> 效果等同于StopDevice。

**请求参数**

| 参数   | 类型   | 是否必要 | 示例值      | 描述                                        |
| ------ | ------ | -------- | ----------- | ------------------------------------------- |
| Action | String | 是       | StopChannel | 操作接口名，系统规定参数。取值：StopChannel |
| Id     | int    | 是       | 101         | 通道ID。                                    |

**返回参数**

| 参数      | 类型   | 示例值                               | 描述             |
| --------- | ------ | ------------------------------------ | ---------------- |
| Id        | int    | 101                                  | 通道ID。         |
| RequestId | String | BEA5625F-8FCF-48F4-851B-CA63946DA664 | 该条任务请求ID。 |

**示例**

**请求示例**

```
http://www.xxxxxx.com?Action=StopChannel&Id=101&<公共请求参数>
```

**返回示例**

```
{    "RequestId": "BEA5625F-8FCF-48F4-851B-CA63946DA664",    "Id": "101"}
```

####    (6) RefreshChannels

**接口描述**
手动刷新通道列表信息。

**请求参数**

| 参数   | 类型   | 是否必要 | 示例值           | 描述                                            |
| ------ | ------ | -------- | ---------------- | ----------------------------------------------- |
| Action | String | 是       | RefreshChannels  | 操作接口名，系统规定参数。取值：RefreshChannels |
| Id     | string | 是       | 1600940466502684 | 设备ID。                                        |

**返回参数**

| 参数      | 类型   | 示例值                               | 描述             |
| --------- | ------ | ------------------------------------ | ---------------- |
| Id        | string | 是                                   | 1600940466502684 |
| RequestId | String | BEA5625F-8FCF-48F4-851B-CA63946DA664 | 该条任务请求ID。 |

**示例**

**请求示例**

```
http://www.xxxxxx.com?Action=RefreshChannels&Id=1600940466502684&<公共请求参数>
```

**返回示例**

```
{    "RequestId": "BEA5625F-8FCF-48F4-851B-CA63946DA664",    "Id": "1600940466502684"}

```

### 4、流操作接口

####    (1) BatchStartStreams

**接口描述**
批量启动流。

**请求参数**

| 参数       | 类型   | 是否必要 | 示例值            | 描述                                              |
| ---------- | ------ | -------- | ----------------- | ------------------------------------------------- |
| Action     | String | 是       | BatchStartStreams | 操作接口名，系统规定参数。取值：BatchStartStreams |
| Id         | String | 是       | 32388487739092997 | 流ID，多值用逗号分隔。                            |
| AccessInfo | String | 是       | xxxx              | 桶的密钥对信息。                                  |

**返回参数**

| 参数      | 类型     | 示例值                               | 描述             |
| --------- | -------- | ------------------------------------ | ---------------- |
| Results   | Result[] |                                      | 结果列表。       |
| RequestId | String   | BEA5625F-8FCF-48F4-851B-CA63946DA664 | 该条任务请求ID。 |

**Result类型**

| 参数  | 类型   | 示例值            | 描述                             |
| ----- | ------ | ----------------- | -------------------------------- |
| Id    | String | 32388487739092997 | 流ID。                           |
| Error | String | Stream not found  | 流的错误信息。（仅在出错时存在） |

**示例**
**请求示例**

```
http://www.xxxxxx.com?Action=BatchStartStreams&Id=32388487739092997&<公共请求参数>
```

**返回示例**

```
{    "RequestId": "BEA5625F-8FCF-48F4-851B-CA63946DA664",    "Results": [        {            "Id": "32388487739092997"        }    ]}
```

####    (2) BatchStopStreams

**接口描述**
批量停止流。

**请求参数**

| 参数   | 类型   | 是否必要 | 示例值            | 描述                                             |
| ------ | ------ | -------- | ----------------- | ------------------------------------------------ |
| Action | String | 是       | BatchStopStreams  | 操作接口名，系统规定参数。取值：BatchStopStreams |
| Id     | String | 是       | 32388487739092997 | 流ID，多值用逗号分隔。                           |

**返回参数**

| 参数      | 类型     | 示例值                               | 描述             |
| --------- | -------- | ------------------------------------ | ---------------- |
| Results   | Result[] |                                      | 结果列表。       |
| RequestId | String   | BEA5625F-8FCF-48F4-851B-CA63946DA664 | 该条任务请求ID。 |

**Result类型**

| 参数  | 类型   | 示例值            | 描述                             |
| ----- | ------ | ----------------- | -------------------------------- |
| Id    | String | 32388487739092997 | 流ID。                           |
| Error | String | Stream not found  | 流的错误信息。（仅在出错时存在） |

**示例**

**请求示例**

```
http://www.xxxxxx.com?Action=BatchStopStreams&Id=32388487739092997&<公共请求参数>
```

**返回示例**

```
{
    "RequestId": "BEA5625F-8FCF-48F4-851B-CA63946DA664",
    "Results": [
        {
            "Id": "32388487739092997"
        }
    ]
}
```

####    (3) DescribeStream

**接口描述**
查询流信息。

**请求参数**

| 参数   | 类型   | 是否必要 | 示例值            | 描述                                           |
| ------ | ------ | -------- | ----------------- | ---------------------------------------------- |
| Action | String | 是       | DescribeStream    | 操作接口名，系统规定参数。取值：DescribeStream |
| Id     | String | 是       | 32388487739092997 | 流ID。                                         |

**返回参数**

| 参数        | 类型   | 示例值                                             | 描述                             |
| ----------- | ------ | -------------------------------------------------- | -------------------------------- |
| Id          | String | 32388487739092997                                  | 流ID。                           |
| Name        | String | 31000000000000000002                               | 流名称。                         |
| App         | String | live                                               | 流所属应用。                     |
| Protocol    | String | gb28181                                            | 流协议。                         |
| GroupId     | String | 32388487739092994                                  | 流所属的空间ID。                 |
| DeviceId    | String | 32388487739092995                                  | 流所属的设备ID。                 |
| Enabled     | Bool   | true                                               | 流是否启用。                     |
| Status      | String | on                                                 | 流状态。取值：on(在线),off(离线) |
| CreatedTime | String | 2019-02-28T17:00:17Z                               | 流创建时间。                     |
| StartTime   | String | 2019-02-28T17:10:17Z                               | 流开始时间。                     |
| StopTime    | String | 2019-02-28T17:15:17Z                               | 流结束时间。                     |
| PushUrl     | String | rtmp://monitor.fanson.com.cn/live/1608908481176072 | RTMP推流完整地址。               |
| RequestId   | String | BEA5625F-8FCF-48F4-851B-CA63946DA664               | 该条任务请求ID。                 |

**示例**

**请求示例**

```
http://www.xxxxxx.com?Action=DescribeStream&Id=32388487739092997&<公共请求参数>
```

**返回示例**

```
{    "RequestId": "BEA5625F-8FCF-48F4-851B-CA63946DA664",    "Id": "32388487739092997",    "Name": "31000000000000000002",    "GroupId": "32388487739092994",    "DeviceId": "32388487739092995",    "Enabled": true,    "Status": "on",    "CreatedTime": "2018-12-10T17:00:00Z",    "StartTime": "2019-02-28T17:10:17Z",    "StopTime": "2019-02-28T17:15:17Z",	"PushUrl": "rtmp://monitor.fanson.com.cn/live/1608908481176072"}
```

####    (4) DescribeStreams

**接口描述**
查询流列表。

**请求参数**

| 参数      | 类型   | 是否必要 | 示例值               | 描述                                                         |
| --------- | ------ | -------- | -------------------- | ------------------------------------------------------------ |
| Action    | String | 是       | DescribeStreams      | 操作接口名，系统规定参数。取值：DescribeStreams              |
| DeviceId  | String | 否       | 32388487739092996    | 按设备ID查询。                                               |
| GroupId   | String | 否       | 32388487739092994    | 按空间ID查询。                                               |
| App       | String | 否       | live                 | 按应用查询。                                                 |
| Name      | String | 否       | 31000000000000000002 | 按名称查询。                                                 |
| Status    | String | 否       | on                   | 按状态查询。取值：on(在线),off(离线)。                       |
| StartTime | String | 是       | 2018-12-10T17:00:00Z | 按开始时间查询。日期格式按照ISO8601表示法，并使用UTC时间。格式为：YYYY-MM-DDThh:mm:ssZ |
| StopTime  | String | 是       | 2018-12-10T18:00:00Z | 按结束时间查询。需大于起始时间。日期格式按照ISO8601表示法，并使用UTC时间。格式为：YYYY-MM-DDThh:mm:ssZ |
| PageSize  | Int    | 否       | 20                   | 分页大小，默认为20。                                         |
| PageNum   | Int    | 否       | 1                    | 第几个分页，默认为1。                                        |

**返回参数**

| 参数       | 类型     | 示例值                               | 描述             |
| ---------- | -------- | ------------------------------------ | ---------------- |
| PageSize   | Int      | 20                                   | 分页大小。       |
| PageNum    | Int      | 1                                    | 第几个分页。     |
| PageCount  | Int      | 5                                    | 分页总数。       |
| TotalCount | Int      | 100                                  | 流总数。         |
| Streams    | Stream[] |                                      | 流列表。         |
| RequestId  | String   | BEA5625F-8FCF-48F4-851B-CA63946DA664 | 该条任务请求ID。 |

**Stream类型**

| 参数        | 类型   | 示例值                                             | 描述                             |
| ----------- | ------ | -------------------------------------------------- | -------------------------------- |
| Id          | String | 32388487739092997                                  | 流ID。                           |
| Name        | String | 31000000000000000002                               | 流名称。                         |
| App         | String | live                                               | 流所属应用。                     |
| Protocol    | String | gb28181                                            | 流协议。                         |
| GroupId     | String | 32388487739092994                                  | 流所属的空间ID。                 |
| DeviceId    | String | 32388487739092995                                  | 流所属的设备ID。                 |
| Enabled     | Bool   | true                                               | 流是否启用。                     |
| Status      | String | on                                                 | 流状态。取值：on(在线),off(离线) |
| CreatedTime | String | 2018-12-10T17:00:00Z                               | 流创建时间。                     |
| StartTime   | String | 2019-02-28T17:10:17Z                               | 流开始时间。                     |
| StopTime    | String | 2019-02-28T17:15:17Z                               | 流结束时间。                     |
| PushUrl     | String | rtmp://monitor.fanson.com.cn/live/1608908481176072 | RTMP推流完整地址。               |
| ChannelName | String | fanson200                                          | NVR设备通道名称。                |

**示例**

**请求示例**

```
http://www.xxxxxx.com?Action=DescribeStreams&<公共请求参数>
```

**返回示例**

```
{    "RequestId": "BEA5625F-8FCF-48F4-851B-CA63946DA664",    "PageSize": 20,    "PageNum": 1,    "PageCount": 5,    "TotalCount": 100,    "Streams": [        {            "Id": "32388487739092997",            "Name": "31000000000000000002",            "App": "live",            "Protocol": "gb28181",            "GroupId": "32388487739092994",            "DeviceId": "32388487739092995",            "Enabled": true,            "Status": "on",            "CreatedTime": "2018-12-10T17:00:00Z",		    "StartTime": "2019-02-28T17:10:17Z",		    "StopTime": "2019-02-28T17:15:17Z",			"PushUrl": "rtmp://monitor.fanson.com.cn/live/1608908481176072",			"ChannelName": ""        }    ]}
```

####    (5) DescribeStreamURL

**接口描述**
获取流URL信息。

**请求参数**

| 参数        | 类型   | 是否必要 | 示例值            | 描述                                                         |
| ----------- | ------ | -------- | ----------------- | ------------------------------------------------------------ |
| Action      | String | 是       | DescribeStreamURL | 操作接口名，系统规定参数。取值：DescribeStreamURL            |
| Id          | String | 是       | 32388487739092997 | 流ID。                                                       |
| OutProtocol | String | 是       | rtmp              | 流播放协议。取值：rtmp、flv、hls                             |
| AuthKey     | String | 是       | your-key          | 播放域名关联的主key，用于生成鉴权URL                         |
| Expire      | Int    | 否       | 3600              | URL的过期时长，单位秒                                        |
| Type        | String | 否       | live              | 流类型，默认live。取值：live（直播流）、vod（点播流，例如NVR上的历史流） |
| StartTime   | Int    | 否       | 1571639499        | 开始时间，适用于vod流类型unix时间戳，单位秒                  |
| EndTime     | Int    | 否       | 1571639499        | 结束时间，适用于vod流类型unix时间戳，单位秒                  |

**返回参数**

| 参数       | 类型   | 示例值                               | 描述                                |
| ---------- | ------ | ------------------------------------ | ----------------------------------- |
| Url        | String | rtmp://xxx/xxx                       | 流的URL。                           |
| ExpireTime | Int    | 1557977029                           | URL过期时间点（unix时间戳，单位秒） |
| RequestId  | String | BEA5625F-8FCF-48F4-851B-CA63946DA664 | 该条任务请求ID。                    |

**示例**

**请求示例**

```
http://www.xxxxxx.com?Action=DescribeStreamURL&Id=32388487739092997&OutProtocol=rtmp&AuthKey=mykey&<公共请求参数>
```

**返回示例**

```
{
    "RequestId": "BEA5625F-8FCF-48F4-851B-CA63946DA664",
    "Url": "rtmp://play_domain/live/stream_name?auth_key=xxxxxx",
    "ExpireTime": "1557977029"
}
```

####    (6) StartStream

**接口描述**
启动流。

**请求参数**

| 参数       | 类型   | 是否必要 | 示例值            | 描述                                        |
| ---------- | ------ | -------- | ----------------- | ------------------------------------------- |
| Action     | String | 是       | StartStream       | 操作接口名，系统规定参数。取值：StartStream |
| Id         | String | 是       | 32388487739092997 | 流ID。                                      |
| AccessInfo | String | 是       | xxxx              | 桶的密钥对信息。                            |

**返回参数**

| 参数      | 类型   | 示例值                               | 描述             |
| --------- | ------ | ------------------------------------ | ---------------- |
| Id        | String | 32388487739092997                    | 流ID。           |
| RequestId | String | BEA5625F-8FCF-48F4-851B-CA63946DA664 | 该条任务请求ID。 |

**示例**

**请求示例**

```
http://www.xxxxxx.com?Action=StartStream&Id=32388487739092997&<公共请求参数>
```

**返回示例**

```
{    "RequestId": "BEA5625F-8FCF-48F4-851B-CA63946DA664",    "Id": "32388487739092997"}
```

####    (7) StopStream

**接口描述**
停止流。

**请求参数**

| 参数   | 类型   | 是否必要 | 示例值            | 描述                                       |
| ------ | ------ | -------- | ----------------- | ------------------------------------------ |
| Action | String | 是       | StopStream        | 操作接口名，系统规定参数。取值：StopStream |
| Id     | String | 是       | 32388487739092997 | 流ID。                                     |

**返回参数**

| 参数      | 类型   | 示例值                               | 描述             |
| --------- | ------ | ------------------------------------ | ---------------- |
| Id        | String | 32388487739092997                    | 流ID。           |
| RequestId | String | BEA5625F-8FCF-48F4-851B-CA63946DA664 | 该条任务请求ID。 |

**示例**

**请求示例**

```
http://www.xxxxxx.com?Action=StopStream&Id=32388487739092997&<公共请求参数>
```

**返回示例**

```
{    "RequestId": "BEA5625F-8FCF-48F4-851B-CA63946DA664",    "Id": "32388487739092997"}
```

####    (8) ForbidVsStream

**接口描述**
禁止某条流的推送。

**请求参数**

| 参数   | 类型   | 是否必要 | 示例值            | 描述                                           |
| ------ | ------ | -------- | ----------------- | ---------------------------------------------- |
| Action | String | 是       | ForbidVsStream    | 操作接口名，系统规定参数。取值：ForbidVsStream |
| Id     | String | 是       | 32388487739092997 | 流ID。                                         |

**返回参数**

| 参数      | 类型   | 示例值                               | 描述             |
| --------- | ------ | ------------------------------------ | ---------------- |
| Id        | String | 32388487739092997                    | 流ID。           |
| RequestId | String | BEA5625F-8FCF-48F4-851B-CA63946DA664 | 该条任务请求ID。 |

**示例**

**请求示例**

```
http://www.xxxxxx.com?Action=ForbidVsStream&Id=32388487739092997&<公共请求参数>
```

**返回示例**

```
{    "RequestId": "BEA5625F-8FCF-48F4-851B-CA63946DA664",    "Id": "32388487739092997"}
```

####    (9) ResumeVsStream

**接口描述**
恢复某条流的推送。

**请求参数**

| 参数   | 类型   | 是否必要 | 示例值            | 描述                                           |
| ------ | ------ | -------- | ----------------- | ---------------------------------------------- |
| Action | String | 是       | ResumeVsStream    | 操作接口名，系统规定参数。取值：ResumeVsStream |
| Id     | String | 是       | 32388487739092997 | 流ID。                                         |

**返回参数**

| 参数      | 类型   | 示例值                               | 描述             |
| --------- | ------ | ------------------------------------ | ---------------- |
| Id        | String | 32388487739092997                    | 流ID。           |
| RequestId | String | BEA5625F-8FCF-48F4-851B-CA63946DA664 | 该条任务请求ID。 |

**示例**

**请求示例**

```
http://www.xxxxxx.com?Action=ResumeVsStream&Id=32388487739092997&<公共请求参数>
```

**返回示例**

```
{    "RequestId": "BEA5625F-8FCF-48F4-851B-CA63946DA664",    "Id": "32388487739092997"}
```

####    (10) ScreenShowStreams

**接口描述**
分屏展示用户在线流列表。

**请求参数**

| 参数     | 类型   | 是否必要 | 示例值            | 描述                                              |
| -------- | ------ | -------- | ----------------- | ------------------------------------------------- |
| Action   | String | 是       | ScreenShowStreams | 操作接口名，系统规定参数。取值：ScreenShowStreams |
| GroupId  | String | 否       | 32388487739092994 | 按空间ID查询。                                    |
| PageSize | Int    | 否       | 20                | 分页大小，默认为20。                              |
| PageNum  | Int    | 否       | 1                 | 第几个分页，默认为1。                             |

**返回参数**

| 参数       | 类型      | 示例值                               | 描述             |
| ---------- | --------- | ------------------------------------ | ---------------- |
| PageSize   | Int       | 20                                   | 分页大小。       |
| PageNum    | Int       | 1                                    | 第几个分页。     |
| PageCount  | Int       | 5                                    | 分页总数。       |
| TotalCount | Int       | 100                                  | 设备总数。       |
| Streams    | Streams[] | 在线流列表。                         |                  |
| RequestId  | String    | BEA5625F-8FCF-48F4-851B-CA63946DA664 | 该条任务请求ID。 |

**Streams类型**

| 参数       | 类型   | 示例值                                     | 描述                                   |
| ---------- | ------ | ------------------------------------------ | -------------------------------------- |
| Id         | String | 1602420467254015                           | 流ID。                                 |
| Name       | String | 推流测试                                   | 流名称。                               |
| InProtocol | String | rtmp                                       | 空间使用的接入协议。取值：gb28181,rtmp |
| Url        | String | rtc://150.242.171.34/live/1602420467254015 | 流播放地址（webRTC）。                 |
| DeviceName | String | 测试设备                                   | 设备名称。                             |

**示例**

**请求示例**

```
http://www.xxxxxx.com?Action=ScreenShowStreams&<公共请求参数>
```

**返回示例**

```
{
	PageSize: 20,
	PageNum: 1,
	PageCount: 1,
	TotalCount: 1,
	Streams: [
		{
			Id: "1602210707603561",
			Name: "34020000001110000008",
			InProtocol: "gb28181",
			Url: "rtc://192.168.1.135/live/1602210707603561",
			DeviceName: "方讯测试NVR勿修改"
		}
	],
	RequestId: "DE31FA1B-A1D8-988B-0392-625A471B362A"
}
```

####    (11) ModifyStream

**接口描述**
修改流名称。

**请求参数**

| 参数    | 类型   | 是否必要 | 示例值            | 描述                                         |
| ------- | ------ | -------- | ----------------- | -------------------------------------------- |
| Action  | String | 是       | ModifyStream      | 操作接口名，系统规定参数。取值：ModifyStream |
| Id      | String | 是       | 32388487739092996 | 流ID。                                       |
| GroupId | String | 是       | 32388487739092994 | 所属空间ID。                                 |
| Name    | String | 是       | xxx               | 流名称。                                     |

**返回参数**

| 参数      | 类型   | 示例值                               | 描述             |
| --------- | ------ | ------------------------------------ | ---------------- |
| Id        | String | 32388487739092996                    | 流ID。           |
| RequestId | String | BEA5625F-8FCF-48F4-851B-CA63946DA664 | 该条任务请求ID。 |

**示例**

**请求示例**

```
http://www.xxxxxx.com?Action=ModifyDevice&Id=32388487739092996&Name=xxx&GroupId=32388487739092994&<公共请求参数>
```

**返回示例**

```
{
    "RequestId": "BEA5625F-8FCF-48F4-851B-CA63946DA664",
    "Id": "32388487739092996 "
}
```

### 5、模板操作接口

####    (1) BatchBindTemplate

**接口描述**
绑定模板到指定的多个实例，比如绑定到空间和流的实例。

**请求参数**

| 参数         | 类型    | 是否必要 | 示例值            | 描述                                              |
| ------------ | ------- | -------- | ----------------- | ------------------------------------------------- |
| Action       | String  | 是       | BatchBindTemplate | 操作接口名，系统规定参数。取值：BatchBindTemplate |
| TemplateId   | String  | 是       | 32388487739092998 | 模板ID。                                          |
| TemplateType | String  | 是       | record            | 模板类型。                                        |
| InstanceId   | String  | 是       | 32388487739092994 | 实例ID，多值用逗号分隔。                          |
| InstanceType | String  | 是       | group             | 实例类型。取值：group(空间),stream(流)            |
| ApplyAll     | Boolean | 否       | false             | 是否强制应用到范围内的所有流，默认false。         |
| Replace      | Boolean | 否       | false             | 是否强制替换已有绑定，默认false                   |

**返回参数**

| 参数      | 类型     | 示例值                               | 描述             |
| --------- | -------- | ------------------------------------ | ---------------- |
| Results   | Result[] |                                      | 结果列表。       |
| RequestId | String   | BEA5625F-8FCF-48F4-851B-CA63946DA664 | 该条任务请求ID。 |

**Result类型**

| 参数         | 类型   | 示例值            | 描述                             |
| ------------ | ------ | ----------------- | -------------------------------- |
| TemplateId   | String | 32388487739092998 | 模板ID。                         |
| TemplateType | String | 是                | record                           |
| InstanceId   | String | 32388487739092994 | 实例ID。                         |
| InstanceType | String | group             | 实例类型。                       |
| Error        | String | some error        | 错误信息。（仅当操作出错时存在） |

**示例**

**请求示例**

```
http://www.xxxxxx.com?Action=BatchBindTemplate&TemplateId=400001&InstanceId=100001&InstanceType=group&<公共请求参数>
```

**返回示例**

```
{
    "RequestId": "BEA5625F-8FCF-48F4-851B-CA63946DA664",
    "Bindings": [
        {
            "InstanceId": "32388487739092994",
            "InstanceType": "group",
            "TemplateId": "32388487739092998",
            "TemplateType": "record"
        }
    ]
}
```

####    (2) BatchUnbindTemplate

**接口描述**
解除绑定模板到指定的多个实例，比如解除绑定到空间和流的实例。

**请求参数**

| 参数         | 类型   | 是否必要 | 示例值              | 描述                                                |
| ------------ | ------ | -------- | ------------------- | --------------------------------------------------- |
| Action       | String | 是       | BatchUnbindTemplate | 操作接口名，系统规定参数。取值：BatchUnbindTemplate |
| TemplateId   | String | 是       | 32388487739092998   | 模板ID，省略时解除实例上符合条件的所有绑定。        |
| TemplateType | String | 是       | record              | 模板类型。取值：record(录制),snapshot(截图)。       |
| InstanceId   | String | 是       | 32388487739092994   | 实例ID，多值用逗号分隔。                            |
| InstanceType | String | 是       | group               | 实例类型。取值：group(空间),stream(流)              |

**返回参数**

| 参数      | 类型     | 示例值                               | 描述             |
| --------- | -------- | ------------------------------------ | ---------------- |
| Results   | Result[] |                                      | 结果列表。       |
| RequestId | String   | BEA5625F-8FCF-48F4-851B-CA63946DA664 | 该条任务请求ID。 |

**Result类型**

| 参数         | 类型   | 示例值            | 描述                             |
| ------------ | ------ | ----------------- | -------------------------------- |
| TemplateId   | String | 32388487739092998 | 模板ID。                         |
| TemplateType | String | record            | 模板类型。                       |
| InstanceId   | String | 32388487739092994 | 实例ID。                         |
| InstanceType | String | group             | 实例类型。                       |
| Error        | String | some error        | 错误信息。（仅当操作出错时存在） |

**示例**

**请求示例**

```
http://www.xxxxxx.com?Action=BatchUnbindTemplate&TemplateId=32388487739092998&32388487739092994=100001&InstanceType=group&<公共请求参数>
```

**返回示例**

```
{    "RequestId": "BEA5625F-8FCF-48F4-851B-CA63946DA664",    "Bindings": [        {            "InstanceId": "32388487739092994",            "InstanceType": "group",            "TemplateId": "32388487739092998",            "TemplateType": "record"        }    ]}
```

####    (3) BindTemplate

**接口描述**
绑定模板到指定的实例，比如绑定到空间和流的实例。

**请求参数**

| 参数         | 类型    | 是否必要 | 示例值            | 描述                                         |
| ------------ | ------- | -------- | ----------------- | -------------------------------------------- |
| Action       | String  | 是       | BindTemplate      | 操作接口名，系统规定参数。取值：BindTemplate |
| TemplateId   | String  | 是       | 32388487739092998 | 模板ID。                                     |
| TemplateType | String  | 是       | record            | 模板类型。                                   |
| InstanceId   | String  | 是       | 32388487739092994 | 实例ID。                                     |
| InstanceType | String  | 是       | group             | 实例类型。取值：group(空间),stream(流)       |
| ApplyAll     | Boolean | 否       | false             | 是否强制应用到范围内的所有流，默认false。    |
| Replace      | Boolean | 否       | false             | 是否强制替换已有绑定，默认false              |

**返回参数**

| 参数         | 类型   | 示例值                               | 描述             |
| ------------ | ------ | ------------------------------------ | ---------------- |
| TemplateId   | String | 32388487739092998                    | 模板ID。         |
| TemplateType | String | 是                                   | record           |
| InstanceId   | String | 32388487739092994                    | 实例ID。         |
| InstanceType | String | group                                | 实例类型。       |
| RequestId    | String | BEA5625F-8FCF-48F4-851B-CA63946DA664 | 该条任务请求ID。 |

**示例**

**请求示例**

```
http://www.xxxxxx.com?Action=BindTemplate&TemplateId=32388487739092998&InstanceId=32388487739092994&InstanceType=group&<公共请求参数>
```

**返回示例**

```
{    "RequestId": "BEA5625F-8FCF-48F4-851B-CA63946DA664",    "InstanceId": "32388487739092994",    "InstanceType": "group",    "TemplateId": "32388487739092998",    "TemplateType": "record"}
```

####    (4) CreateTemplate

**接口描述**
创建新模板。

**请求参数**

**公共模板参数**

| 参数        | 类型   | 是否必要 | 示例值                 | 描述                                                         |
| ----------- | ------ | -------- | ---------------------- | ------------------------------------------------------------ |
| Action      | String | 是       | CreateTemplate         | 操作接口名，系统规定参数。取值：CreateTemplate               |
| Name        | String | 是       | 录制模板               | 模板名称。                                                   |
| Description | String | 否       | 录制模板               | 模板描述。                                                   |
| Type        | String | 是       | record                 | 模板类型。取值：record(录制),snapshot(截图),transcode(转码),timeshift(时移) |
| Callback    | String | 否       | http://www.example.com | 模板执行后的回调。                                           |

**录制模板**

| 参数          | 类型   | 是否必要 | 示例值                              | 描述                                                         |
| ------------- | ------ | -------- | ----------------------------------- | ------------------------------------------------------------ |
| Region        | String | 是       | cn-shanghai                         | oNest所属区域，即服务中心。                                  |
| oNestBucket   | String | 是       | bucketname                          | oNest的Bucket。                                              |
| oNestEndpoint | String | 是       | oNest-cn-shanghai.xxxxx.com         | oNest的域名。                                                |
| Interval      | Int    | 是       | 3600                                | 操作周期，单位秒。                                           |
| FileFormat    | String | 是       | mp4,flv                             | 存储文件格式，多值用逗号分隔，目前仅支持mp4格式。取值：mp4,flv,hls |
| Mp4           | String | 否       | {EscapedStartTime}_{EscapedEndTime} | MP4的存储路径。路径中支持变量匹配，可选{AppName}、{StreamName}、{Sequence}、{EscapedStartTime}、{EscapedEndTime}必须包含{EscapedStartTime}和{EscapedEndTime} |
| Flv           | String | 否       | {EscapedStartTime}_{EscapedEndTime} | FLV的存储路径。格式参考Mp4说明。                             |
| HlsM3u8       | String | 否       | {EscapedStartTime}_{EscapedEndTime} | HLS的存储路径，m3u8文件。格式参考Mp4说明。                   |
| HlsTs         | String | 否       | {Sequence}_{UnixTimestamp}          | HLS的存储路径，ts文件。路径中支持变量匹配，可选{AppName}、{StreamName}、{UnixTimestamp}、{Sequence}必须包含{UnixTimestamp}和{Sequence}变量 |
| Trigger       | String | 否       | auto                                | 录制方式，默认auto。取值：auto（自动），ondemand（按需）     |
| Expired       | Int    | 否       | 7                                   | 对象存储保存周期,单位天,0代表无期限。                        |

**截图模板**

| 参数          | 类型   | 是否必要 | 示例值                           | 描述                                                         |
| ------------- | ------ | -------- | -------------------------------- | ------------------------------------------------------------ |
| Region        | String | 是       | cn-shanghai                      | oNest所属区域，即服务中心。                                  |
| oNestBucket   | String | 是       | bucketname                       | oNest的Bucket。                                              |
| oNestEndpoint | String | 是       | oNest-cn-shanghai.xxxxxx.com     | oNest的域名。                                                |
| Interval      | Int    | 是       | 3600                             | 操作周期，单位秒。                                           |
| FileFormat    | String | 是       | jpg                              | 存储文件格式，多值用逗号分隔。取值：jpg                      |
| JpgOverwrite  | String | 否       | {AppName}_{StreamName}.jpg       | JPG的存储路径，用于覆盖截图。目前仅支持生成jpg图片。支持变量匹配，包含{AppName}、{StreamName} |
| JpgSequence   | String | 否       | {StreamName}_{UnixTimestamp}.jpg | JPG的存储路径，用于序列截图。目前仅支持生成jpg图片。支持变量匹配，包含{AppName}、{StreamName}、{UnixTimestamp}、{Sequence}。{UnixTimestamp}、{Sequence}必填一个 |
| Expired       | Int    | 否       | 7                                | 对象存储保存周期,单位天,0代表无期限。                        |

**时移模板**

| 参数      | 类型 | 是否必要 | 示例值 | 描述                 |
| --------- | ---- | -------- | ------ | -------------------- |
| Retention | Int  | 是       | 3      | 时移保存周期，单位天 |

**转码模板**

| 参数             | 类型   | 是否必要 | 示例值 | 描述                                    |
| ---------------- | ------ | -------- | ------ | --------------------------------------- |
| TransConfigsJSON | String | 是       |        | 转码配置TransConfig类型的数组，JSON格式 |

**TransConfig类型**

| 参数         | 类型   | 是否必要 | 示例值 | 描述                                                         |
| ------------ | ------ | -------- | ------ | ------------------------------------------------------------ |
| Name         | String | 是       | sd     | 转码规则名称,取值：转码规则名称将作为转码流后缀，建议按使用习惯设置为sd，200k等易辨识后缀，只支持数字和字母 |
| VideoCodec   | String | 是       | h264   | 视频编码取值：h264                                           |
| VideoBitrate | Int    | 是       | 800    | 视频比特率，单位kbps                                         |
| Fps          | Int    | 是       | 25     | 视频帧率，单位fps                                            |
| Gop          | Int    | 是       | 50     | 视频Gop，单位帧                                              |
| Height       | Int    | 是       | 640    | 视频高度                                                     |
| Width        | Int    | 是       | 1280   | 视频宽度                                                     |

**返回参数**

| 参数      | 类型   | 示例值                               | 描述             |
| --------- | ------ | ------------------------------------ | ---------------- |
| Id        | String | 32388487739092998                    | 模板ID。         |
| RequestId | String | BEA5625F-8FCF-48F4-851B-CA63946DA664 | 该条任务请求ID。 |

**示例**

**请求示例**

```
http://wwww.xxxxxx.com?Action=CreateTemplate&Name=录制模板&Type=record&FileFormat=mp4&Interval=3600&<公共请求参数>
```

**返回示例**

```
{    "RequestId": "BEA5625F-8FCF-48F4-851B-CA63946DA664",    "Id": "32388487739092998 "}
```

####    (5) DeleteTemplate

**接口描述**
删除模板。

**请求参数**

| 参数   | 类型   | 是否必要 | 示例值            | 描述                                           |
| ------ | ------ | -------- | ----------------- | ---------------------------------------------- |
| Action | String | 是       | DeleteTemplate    | 操作接口名，系统规定参数。取值：DeleteTemplate |
| Id     | String | 是       | 32388487739092998 | 模板ID。                                       |

**返回参数**

| 参数      | 类型   | 示例值                               | 描述             |
| --------- | ------ | ------------------------------------ | ---------------- |
| RequestId | String | BEA5625F-8FCF-48F4-851B-CA63946DA664 | 该条任务请求ID。 |

**示例**

**请求示例**

```
http://www.xxxx.com?Action=DeleteTemplate&Id=32388487739092998&<公共请求参数>
```

**返回示例**

```
{    "RequestId": "BEA5625F-8FCF-48F4-851B-CA63946DA664"}
```

####    (6) DescribeTemplate

**接口描述**
获取模板信息。

**请求参数**

| 参数   | 类型   | 是否必要 | 示例值            | 描述                                             |
| ------ | ------ | -------- | ----------------- | ------------------------------------------------ |
| Action | String | 是       | DescribeTemplate  | 操作接口名，系统规定参数。取值：DescribeTemplate |
| Id     | String | 是       | 32388487739092998 | 模板ID。                                         |

**返回参数**

| 参数          | 类型          | 示例值                               | 描述                                                         |
| ------------- | ------------- | ------------------------------------ | ------------------------------------------------------------ |
| Id            | String        | 32388487739092998                    | 模板ID。                                                     |
| Name          | String        | 录制模板                             | 模板名称。                                                   |
| Description   | String        | 录制模板                             | 模板描述。                                                   |
| Type          | String        | record                               | 模板类型。取值：record(录制),snapshot(截图),transcode(转码),timeshift(时移) |
| Region        | String        | cn-shanghai                          | oNest所属区域，即服务中心。                                  |
| oNestBucket   | String        | my_oNest_bucket                      | oNest的Bucket。                                              |
| oNestEndpoint | String        | oNest-cn-shanghai.xxxxxx.com         | oNest的域名。                                                |
| Interval      | Int           | 3600                                 | 操作周期，单位秒。                                           |
| Retention     | Int           | 3                                    | （仅限时移模板）时移保存周期，单位天                         |
| FileFormat    | String        | mp4,flv                              | 存储文件格式，多值用逗号分隔。取值：mp4,flv,hls,jpg          |
| JpgOverwrite  | String        | {StreamName}                         | （仅限截图模板）JPG的存储路径，用于覆盖截图。                |
| JpgSequence   | String        | {StreamName}_{UnixTimestamp}         | （仅限截图模板）JPG的存储路径，用于序列截图。                |
| Mp4           | String        | {EscapedStartTime}_{EscapedEndTime}  | （仅限录制模板）MP4的存储路径。                              |
| Flv           | String        | {EscapedStartTime}_{EscapedEndTime}  | （仅限录制模板）FLV的存储路径。                              |
| HlsM3u8       | String        | {EscapedStartTime}_{EscapedEndTime}  | （仅限录制模板）HLS的存储路径，m3u8文件。                    |
| HlsTs         | String        | {Sequence}_{UnixTimestamp}           | （仅限录制模板）HLS的存储路径，ts文件。                      |
| Trigger       | String        | auto                                 | （仅限录制模板）模板触发类型。取值：auto（自动），ondemand（按需） |
| Callback      | String        | http://xxx/callback                  | 模板执行后的回调。                                           |
| CreatedTime   | String        | 2018-12-10T21:00:00Z                 | 模板创建时间。                                               |
| Expired       | Int           | 7                                    | 对象存储保存周期,单位天,0代表无期限。                        |
| TransConfigs  | TransConfig[] |                                      | （仅限转码模板）转码配置列表                                 |
| RequestId     | String        | BEA5625F-8FCF-48F4-851B-CA63946DA664 | 该条任务请求ID。                                             |

**TransConfig类型**

| 参数         | 类型   | 示例值             | 描述                                                         |
| ------------ | ------ | ------------------ | ------------------------------------------------------------ |
| Id           | String | 600001-cn-shanghai | 转码配置ID                                                   |
| Name         | String | sd                 | 转码规则名称,取值：转码规则名称将作为转码流后缀，建议按使用习惯设置为sd，200k等易辨识后缀，只支持数字和字母 |
| VideoCodec   | String | h264               | 视频编码                                                     |
| VideoBitrate | Int    | 800                | 视频比特率，单位kbps                                         |
| Fps          | Int    | 25                 | 视频帧率，单位fps                                            |
| Gop          | Int    | 50                 | 视频Gop，单位帧                                              |
| Height       | Int    | 640                | 视频高度                                                     |
| Width        | Int    | 1280               | 视频宽度                                                     |

**示例**

**请求示例**

```
http://www.xxx.com?Action=DescribeTemplate&ID=32388487739092998&<公共请求参数>
```

**返回示例**

```
{
    "RequestId": "BEA5625F-8FCF-48F4-851B-CA63946DA664",
    "Id": "32388487739092998",
    "Name": "录制模板",
    "Description": "录制模板",
    "Type": "record",
    "Region": "cn-shanghai",
    "oNestBucket": "my_oNest_bucket",
    "oNestEndpoint": "oNest-cn-shanghai.xxxxxx.com",
    "Interval": 3600,
    "FileFormat": "mp4",
    "Mp4": "{StreamName}_{EscapedStartTime}_{EscapedEndTime}",
    "Callback": "http://xxx/callback",
    "CreatedTime": "2018-12-10T21:00:00Z",
    "Expired": 7
}
			
```

####    (7) DescribeTemplates

**接口描述**
查询模板列表。

**请求参数**

| 参数       | 类型   | 是否必要 | 示例值            | 描述                                              |
| ---------- | ------ | -------- | ----------------- | ------------------------------------------------- |
| Action     | String | 是       | DescribeTemplates | 操作接口名，系统规定参数。取值：DescribeTemplates |
| Type       | String | 否       | record            | 按模板类型查询。                                  |
| InstanceId | String | 否       | 32388487739092998 | 按绑定的实例ID查询。                              |
| PageSize   | Int    | 否       | 20                | 分页大小，默认为20。                              |
| PageNum    | Int    | 否       | 1                 | 第几个分页，默认为1。                             |

**返回参数**

| 参数       | 类型       | 示例值                               | 描述             |
| ---------- | ---------- | ------------------------------------ | ---------------- |
| PageSize   | Int        | 20                                   | 分页大小。       |
| PageNum    | Int        | 1                                    | 第几个分页。     |
| PageCount  | Int        | 5                                    | 分页总数。       |
| TotalCount | Int        | 100                                  | 模板总数。       |
| Templates  | Template[] | 模板列表。                           |                  |
| RequestId  | String     | BEA5625F-8FCF-48F4-851B-CA63946DA664 | 该条任务请求ID。 |

**Template类型**

| 参数          | 类型          | 示例值                               | 描述                                                         |
| ------------- | ------------- | ------------------------------------ | ------------------------------------------------------------ |
| Id            | String        | 32388487739092998                    | 模板ID。                                                     |
| Name          | String        | 录制模板                             | 模板名称。                                                   |
| Description   | String        | 录制模板                             | 模板描述。                                                   |
| Type          | String        | record                               | 模板类型。取值：record(录制),snapshot(截图),transcode(转码),timeshift(时移) |
| Region        | String        | cn-shanghai                          | oNest所属区域，即服务中心。                                  |
| oNestBucket   | String        | my_oNest_bucket                      | oNest的Bucket。                                              |
| oNestEndpoint | String        | oNest-cn-shanghai.xxxxx.com          | oNest的域名。                                                |
| Interval      | Int           | 3600                                 | 操作周期，单位秒。                                           |
| Retention     | Int           | 3                                    | （仅限时移模板）时移保存周期，单位天                         |
| FileFormat    | String        | mp4                                  | 存储文件格式，多值用逗号分隔。取值：mp4,flv,hls,jpg          |
| JpgOverwrite  | String        | {StreamName}                         | （仅限截图模板）JPG的存储路径，用于覆盖截图。                |
| JpgSequence   | String        | {StreamName}_{UnixTimestamp}         | （仅限截图模板）JPG的存储路径，用于序列截图。                |
| Mp4           | String        | {EscapedStartTime}_{EscapedEndTime}  | （仅限录制模板）MP4的存储路径。                              |
| Flv           | String        | {EscapedStartTime}_{EscapedEndTime}  | （仅限录制模板）FLV的存储路径。                              |
| HlsM3u8       | String        | {EscapedStartTime}_{EscapedEndTime}  | （仅限录制模板）HLS的存储路径，m3u8文件。                    |
| HlsTs         | String        | {Sequence}_{UnixTimestamp}           | （仅限录制模板）HLS的存储路径，ts文件。                      |
| Trigger       | String        | auto                                 | （仅限录制模板）模板触发类型。取值：auto（自动），ondemand（按需） |
| Callback      | String        | http://xxx/callback                  | 模板执行后的回调。                                           |
| CreatedTime   | String        | 2018-12-10T21:00:00Z                 | 模板创建时间。                                               |
| Expired       | Int           | 7                                    | 对象存储保存周期,单位天,0代表无期限。                        |
| TransConfigs  | TransConfig[] |                                      | （仅限转码模板）转码配置列表                                 |
| RequestId     | String        | BEA5625F-8FCF-48F4-851B-CA63946DA664 | 该条任务请求ID。                                             |

**TransConfig类型**

| 参数         | 类型   | 示例值             | 描述                                                         |
| ------------ | ------ | ------------------ | ------------------------------------------------------------ |
| Id           | String | 600001-cn-shanghai | 转码配置ID                                                   |
| Name         | String | sd                 | 转码规则名称,取值：转码规则名称将作为转码流后缀，建议按使用习惯设置为sd，200k等易辨识后缀，只支持数字和字母 |
| VideoCodec   | String | h264               | 视频编码                                                     |
| VideoBitrate | Int    | 800                | 视频比特率，单位kbps                                         |
| Fps          | Int    | 25                 | 视频帧率，单位fps                                            |
| Gop          | Int    | 50                 | 视频Gop，单位帧                                              |
| Height       | Int    | 640                | 视频高度                                                     |
| Width        | Int    | 1280               | 视频宽度                                                     |

**示例**

**请求示例**

```
http://www.xxxxxx.com?Action=DescribeTemplates&<公共请求参数>
```

**返回示例**

```
{
    "RequestId": "BEA5625F-8FCF-48F4-851B-CA63946DA664",
    "Templates": [
        {
            "Id": "32388487739092998 ",
            "Name": "录制模板",
            "Description": "录制模板",
            "Type": "record",
            "Region": "cn-shanghai",
            "oNestBucket": "my_oNest_bucket",
            "oNestEndpoint": "oNest-cn-shanghai.xxxxxx.com",
            "Interval": 3600,
            "FileFormat": "mp4",
            "Mp4": "{StreamName}_{EscapedStartTime}_{EscapedEndTime}",
            "Callback": "http://xxx/callback",
            "CreatedTime": "2018-12-10T21:00:00Z",
            "Expired": 7
        }
    ]
}
```

####    (8) ModifyTemplate

**接口描述**
修改模板信息。

**请求参数**

**公共模板参数**

| 参数        | 类型   | 是否必要 | 示例值                 | 描述                                           |
| ----------- | ------ | -------- | ---------------------- | ---------------------------------------------- |
| Action      | String | 是       | ModifyTemplate         | 操作接口名，系统规定参数。取值：ModifyTemplate |
| Id          | String | 是       | 32388487739092998      | 模板ID。                                       |
| Name        | String | 否       | 录制模板               | 模板名称。                                     |
| Description | String | 否       | 录制模板               | 模板描述。                                     |
| Callback    | String | 否       | http://www.example.com | 模板执行后的回调。                             |

**录制模板**

| 参数          | 类型   | 是否必要 | 示例值                              | 描述                                                         |
| ------------- | ------ | -------- | ----------------------------------- | ------------------------------------------------------------ |
| Region        | String | 否       | cn-shanghai                         | oNest所属区域，即服务中心。                                  |
| oNestBucket   | String | 否       | bucketname                          | oNest的Bucket。                                              |
| oNestEndpoint | String | 否       | oNest-cn-shanghai.xxxxx.com         | oNest的域名。                                                |
| Interval      | Int    | 否       | 3600                                | 操作周期，单位秒。                                           |
| FileFormat    | String | 否       | mp4                                 | 存储文件格式，多值用逗号分隔，目前仅支持mp4格式。取值：mp4,flv,hls |
| Mp4           | String | 否       | {EscapedStartTime}_{EscapedEndTime} | MP4的存储路径。路径中支持变量匹配，可选{AppName}、{StreamName}、{Sequence}、{EscapedStartTime}、{EscapedEndTime}必须包含{EscapedStartTime}和{EscapedEndTime} |
| Flv           | String | 否       | {EscapedStartTime}_{EscapedEndTime} | FLV的存储路径。格式参考Mp4说明。                             |
| HlsM3u8       | String | 否       | {EscapedStartTime}_{EscapedEndTime} | HLS的存储路径，m3u8文件。格式参考Mp4说明。                   |
| HlsTs         | String | 否       | {Sequence}_{UnixTimestamp}          | HLS的存储路径，ts文件。路径中支持变量匹配，可选{AppName}、{StreamName}、{UnixTimestamp}、{Sequence}必须包含{UnixTimestamp}和{Sequence}变量 |
| Trigger       | String | 否       | auto                                | 模板触发类型。取值：auto（自动），ondemand（按需）           |
| Expired       | Int    | 否       | 7                                   | 对象存储保存周期,单位天,0代表无期限。                        |

**截图模板**

| 参数          | 类型   | 是否必要 | 示例值                           | 描述                                                         |
| ------------- | ------ | -------- | -------------------------------- | ------------------------------------------------------------ |
| Region        | String | 否       | cn-shanghai                      | oNest所属区域，即服务中心。                                  |
| oNestBucket   | String | 否       | bucketname                       | oNest的Bucket。                                              |
| oNestEndpoint | String | 否       | oNest-cn-shanghai.xxxxxx.com     | oNest的域名。                                                |
| Interval      | Int    | 否       | 3600                             | 操作周期，单位秒。                                           |
| FileFormat    | String | 否       | jpg                              | 存储文件格式，多值用逗号分隔。取值：jpg                      |
| JpgOverwrite  | String | 否       | {AppName}_{StreamName}.jpg       | JPG的存储路径，用于覆盖截图。目前仅支持生成jpg图片。支持变量匹配，包含{AppName}、{StreamName} |
| JpgSequence   | String | 否       | {StreamName}_{UnixTimestamp}.jpg | JPG的存储路径，用于序列截图。目前仅支持生成jpg图片。支持变量匹配，包含{AppName}、{StreamName}、{UnixTimestamp}、{Sequence}。{UnixTimestamp}、{Sequence}必填一个 |
| Expired       | Int    | 否       | 7                                | 对象存储保存周期,单位天,0代表无期限。                        |

**时移模板**

| 参数      | 类型 | 是否必要 | 示例值 | 描述                 |
| --------- | ---- | -------- | ------ | -------------------- |
| Retention | Int  | 否       | 3      | 时移保存周期，单位天 |

**转码模板**

| 参数             | 类型   | 是否必要 | 示例值 | 描述                                    |
| ---------------- | ------ | -------- | ------ | --------------------------------------- |
| TransConfigsJSON | String | 否       |        | 转码配置TransConfig类型的数组，JSON格式 |

**TransConfig类型**

| 参数         | 类型   | 是否必要 | 示例值             | 描述                                                         |
| ------------ | ------ | -------- | ------------------ | ------------------------------------------------------------ |
| Action       | String | 是       | modify             | 针对转码配置的改动取值：create(新增), modify(修改), delete(删除) |
| Id           | String | 否       | 600001-cn-shanghai | 转码配置ID，修改或删除已有转码配置时需要                     |
| Name         | String | 否       | sd                 | 转码规则名称,取值：转码规则名称将作为转码流后缀，建议按使用习惯设置为sd，200k等易辨识后缀，只支持数字和字母 |
| VideoCodec   | String | 否       | h264               | 视频编码取值：h264                                           |
| VideoBitrate | Int    | 否       | 800                | 视频比特率，单位kbps                                         |
| Fps          | Int    | 否       | 25                 | 视频帧率，单位fps                                            |
| Gop          | Int    | 否       | 50                 | 视频Gop，单位帧                                              |
| Height       | Int    | 否       | 640                | 视频高度                                                     |
| Width        | Int    | 否       | 1280               | 视频宽度                                                     |

**返回参数**

| 参数      | 类型   | 示例值                               | 描述             |
| --------- | ------ | ------------------------------------ | ---------------- |
| Id        | String | 32388487739092998                    | 模板ID。         |
| RequestId | String | BEA5625F-8FCF-48F4-851B-CA63946DA664 | 该条任务请求ID。 |

**示例**

**请求示例**

```
http://www.xxxx.com?Action=ModifyTemplate&Id=32388487739092998 &Name=录制模板&<公共请求参数>
```

**返回示例**

```
{    "RequestId": "BEA5625F-8FCF-48F4-851B-CA63946DA664",    "Id": "32388487739092998 "}
```

####    (9) UnbindTemplate

**接口描述**
解除绑定模板到指定的实例，比如解除绑定到空间和流的实例。

> 模板id和类型至少指定一个。

**请求参数**

| 参数         | 类型   | 是否必要 | 示例值            | 描述                                           |
| ------------ | ------ | -------- | ----------------- | ---------------------------------------------- |
| Action       | String | 是       | UnbindTemplate    | 操作接口名，系统规定参数。取值：UnbindTemplate |
| TemplateId   | String | 是       | 32388487739092998 | 模板ID。                                       |
| TemplateType | String | 是       | record            | 模板类型。取值：record(录制),snapshot(截图)    |
| InstanceId   | String | 是       | 32388487739092994 | 实例ID。                                       |
| InstanceType | String | 是       | group             | 实例类型。取值：group(空间),stream(流)         |

**返回参数**

| 参数         | 类型   | 示例值                               | 描述             |
| ------------ | ------ | ------------------------------------ | ---------------- |
| TemplateId   | String | 32388487739092998                    | 模板ID。         |
| TemplateType | String | record                               | 模板类型。       |
| InstanceId   | String | 32388487739092994                    | 实例ID。         |
| InstanceType | String | group                                | 实例类型。       |
| RequestId    | String | BEA5625F-8FCF-48F4-851B-CA63946DA664 | 该条任务请求ID。 |

**示例**

**请求示例**

```
http://www.xxxxx.com?Action=UnbindTemplate&TemplateId=32388487739092998&InstanceId=32388487739092994&InstanceType=group&<公共请求参数>
```

**返回示例**

```
{
    "RequestId": "BEA5625F-8FCF-48F4-851B-CA63946DA664",
    "InstanceId": "32388487739092994",
    "InstanceType": "group",
    "TemplateId": "32388487739092998",
    "TemplateType": "record",
}
```

### 6、录制操作接口

####    (1) DescribeRecords

**接口描述**
查询存储记录列表。

**请求参数**

| 参数      | 类型   | 是否必要 | 示例值               | 描述                                                         |
| --------- | ------ | -------- | -------------------- | ------------------------------------------------------------ |
| Action    | String | 是       | DescribeRecords      | 操作接口名，系统规定参数。取值：DescribeRecords              |
| Type      | String | 是       | record               | 按存储记录类型查询。取值：record(录制),snapshot(截图)        |
| StreamId  | String | 是       | 32388487739092997    | 按流ID查询。                                                 |
| StartTime | String | 是       | 2018-12-10T17:00:00Z | 按开始时间查询。日期格式按照ISO8601表示法，并使用UTC时间。格式为：YYYY-MM-DDThh:mm:ssZ |
| EndTime   | String | 是       | 2018-12-10T18:00:00Z | 按结束时间查询。需大于起始时间。日期格式按照ISO8601表示法，并使用UTC时间。格式为：YYYY-MM-DDThh:mm:ssZ |
| PageSize  | Int    | 否       | 20                   | 分页大小，默认为20。                                         |
| Page Num  | Int    | 否       | 1                    | 第几个分页，默认为1。                                        |

**返回参数**

| 参数       | 类型     | 示例值                               | 描述             |
| ---------- | -------- | ------------------------------------ | ---------------- |
| PageSize   | Int      | 20                                   | 分页大小。       |
| PageNum    | Int      | 1                                    | 第几个分页。     |
| PageCount  | Int      | 5                                    | 分页总数。       |
| TotalCount | Int      | 100                                  | 存储记录总数。   |
| Records    | Record[] |                                      | 存储记录列表。   |
| RequestId  | String   | BEA5625F-8FCF-48F4-851B-CA63946DA664 | 该条任务请求ID。 |

**Record类型**

| 参数        | 类型   | 示例值                              | 描述                                            |
| ----------- | ------ | ----------------------------------- | ----------------------------------------------- |
| Id          | String | f54522af-9907-44c1-af2e-b32958axxxx | 存储记录ID。                                    |
| Type        | String | record                              | 存储记录类型。取值：record(录制),snapshot(截图) |
| FileFormat  | String | hls                                 | 存储文件格式。取值：mp4,flv,hls,jpg             |
| Url         | String | http://xxx/xxx.mp4                  | 存储文件的URL。                                 |
| oNestBucket | String | my_oNest_bucket                     | 存储文件的bucket。                              |
| oNestObject | String | my/oNest/object.mp4                 | 存储文件的object。                              |
| StartTime   | String | 2018-12-10T17:00:00Z                | 存储记录开始时间。                              |
| EndTime     | String | 2018-12-10T18:00:00Z                | 存储记录结束时间。                              |
| Height      | Int    | 1080                                | 高度。                                          |
| Width       | Int    | 1920                                | 宽度。                                          |
| Duration    | Int    | 0                                   | 时长。单位：秒                                  |

**示例**

**请求示例**

```
http://www.xxxxxx.com?Action=DescribeRecords&<公共请求参数>
```

**返回示例**

```
{
    "RequestId": "BEA5625F-8FCF-48F4-851B-CA63946DA664",
    "PageSize": 20,
    "PageNum": 1,
    "PageCount": 5,
    "TotalCount": 100,
    "Records": [
        {
            "Id": "f54522af-9907-44c1-af2e-b32958axxxx",
            "Type": "record",
            "FileFormat": "mp4",
            "oNestBucket": "my_oNest_bucket",
            "oNestObject": "my/oNest/object.mp4",
            "Url": "http://xxx/xxx.mp4",
            "StartTime": "2018-12-10T17:00:00Z",
            "EndTime": "2018-12-10T18:00:00Z",
            "Height": 1080,
            "Width": 1920,
            "Duration": 0
        }
    ]
}
```

### 7、统计查询接口

####    (1) DescribeUsageStatUpVideoAudioInfo

**接口描述**
接入监控-查询流帧率和码率数据。仅支持单路流监控，按5分钟粒度统计，支持最大时间跨度为6小时。

**请求参数**

| 参数      | 类型   | 是否必要 | 示例值                            | 描述                                                         |
| --------- | ------ | -------- | --------------------------------- | ------------------------------------------------------------ |
| Action    | String | 是       | DescribeUsageStatUpVideoAudioInfo | 操作接口名，系统规定参数。取值：DescribeUsageStatUpVideoAudioInfo |
| GroupId   | String | 是       | 32388487739092997                 | 空间ID。                                                     |
| StreamId  | String | 是       | 1599647895724053                  | 流ID。                                                       |
| StartTime | String | 是       | 2020-09-09T16:00:00Z              | 起始时间。日期格式按照ISO8601表示法，并使用UTC时间。格式为：YYYY-MM-DDThh:mm:ssZ |
| EndTime   | String | 是       | 2020-09-09T21:59:00Z              | 结束时间。需大于起始时间。日期格式按照ISO8601表示法，并使用UTC时间。格式为：YYYY-MM-DDThh:mm:ssZ |

**返回参数**

| 参数                     | 类型                      | 示例值                               | 描述                 |
| ------------------------ | ------------------------- | ------------------------------------ | -------------------- |
| FrameRateAndBitRateInfos | FrameRateAndBitRateInfo[] |                                      | 流的帧率、码率信息。 |
| RequestId                | String                    | D1B89436-9C44-7A8C-C3C6-144932BBEB1B | 该条任务请求ID。     |

**FrameRateAndBitRateInfo类型**

| 参数           | 类型   | 示例值               | 描述                |
| -------------- | ------ | -------------------- | ------------------- |
| AudioFrameRate | String | 167.67               | 流的音频帧率。      |
| BitRate        | String | 192.02               | 流的码率。          |
| Time           | String | 2020-09-16T10:05:00Z | 统计时刻，UTC格式。 |
| VideoFrameRate | String | 30.01                | 流的视频帧率。      |

**示例**

**请求示例**

```
http://www.xxxxxx.com?Action=DescribeUsageStatUpVideoAudioInfo&GroupId=32388487739092997&StreamId=1599647895724053&StartTime=2020-09-16T09:00:00Z&EndTime=2020-09-16T15:00:00Z&<公共请求参数>
```

**返回示例**

```
{
	FrameRateAndBitRateInfos: {
		FrameRateAndBitRateInfo: [
			{
				VideoFrameRate: "30.01",
				AudioFrameRate: "167.67",
				BitRate: "192.02",
				Time: "2020-09-16T10:05:00Z"
			},
			{
				VideoFrameRate: "29.22",
				AudioFrameRate: "165.43",
				BitRate: "192",
				Time: "2020-09-16T10:00:00Z"
			},
			{
				VideoFrameRate: "30.33",
				AudioFrameRate: "167.77",
				BitRate: "192",
				Time: "2020-09-16T09:55:00Z"
			},
			{
				VideoFrameRate: "30",
				AudioFrameRate: "167.53",
				BitRate: "192",
				Time: "2020-09-16T09:50:00Z"
			}
		]
	},
	RequestId: "D1B89436-9C44-7A8C-C3C6-144932BBEB1B"
}
```

####    (2) DescribeUsageStatUpPeakPublishStreamData

**接口描述**
查询空间推流路数。

> 接入路数峰值按天粒度统计。接入路数指全部接入类型的流，若同时有推流类型空间、拉流类型空间，则接入路数包含推流、拉流路数。

**请求参数**

| 参数      | 类型   | 是否必要 | 示例值                                   | 描述                                                         |
| --------- | ------ | -------- | ---------------------------------------- | ------------------------------------------------------------ |
| Action    | String | 是       | DescribeUsageStatUpPeakPublishStreamData | 操作接口名，系统规定参数。取值：DescribeUsageStatUpPeakPublishStreamData |
| GroupId   | String | 是       | 32388487739092997                        | 空间ID。                                                     |
| StartTime | String | 是       | 2020-09-09T16:00:00Z                     | 起始时间。日期格式按照ISO8601表示法，并使用UTC时间。格式为：YYYY-MM-DDThh:mm:ssZ |
| EndTime   | String | 是       | 2020-09-10T15:59:59Z                     | 结束时间。需大于起始时间。日期格式按照ISO8601表示法，并使用UTC时间。格式为：YYYY-MM-DDThh:mm:ssZ |

**返回参数**

| 参数                               | 类型                                | 示例值                               | 描述             |
| ---------------------------------- | ----------------------------------- | ------------------------------------ | ---------------- |
| DescribeVsUpPeakPublishStreamDatas | DescribeVsUpPeakPublishStreamData[] |                                      | 路数统计信息。   |
| RequestId                          | String                              | D1B89436-9C44-7A8C-C3C6-144932BBEB1B | 该条任务请求ID。 |

**DescribeVsUpPeakPublishStreamData类型**

| 参数             | 类型   | 示例值               | 描述       |
| ---------------- | ------ | -------------------- | ---------- |
| PeakTime         | String | 2020-08-12T15:59:59Z | 日期。     |
| PublishStreamNum | Int    | 0                    | 推流路数。 |

**示例**

**请求示例**

```
http://www.xxxxxx.com?Action=DescribeUsageStatUpPeakPublishStreamData&GroupId=32388487739092997&StartTime=2020-09-09T16:00:00Z&EndTime=2020-09-09T15:59:59Z&<公共请求参数>
```

**返回示例**

```
{
	DescribeVsUpPeakPublishStreamDatas: {
		DescribeVsUpPeakPublishStreamData: [
			{
				PeakTime: "2020-08-12T15:59:59Z",
				PublishStreamNum: 0
			},
			{
				PeakTime: "2020-08-13T15:59:59Z",
				PublishStreamNum: 0
			}
		]
	},
	RequestId: "45D231D3-EB34-CA00-EAD6-1D06395A3228"
}
```

####    (3) DescribeUsageStatRecordData

**接口描述**
查询空间录制文件时长统计。

> 数据查询的起止时间跨度最大为90天。

**请求参数**

| 参数       | 类型   | 是否必要 | 示例值                      | 描述                                                         |
| ---------- | ------ | -------- | --------------------------- | ------------------------------------------------------------ |
| Action     | String | 是       | DescribeUsageStatRecordData | 操作接口名，系统规定参数。取值：DescribeUsageStatRecordData  |
| GroupId    | String | 是       | 32388487739092997           | 空间ID。                                                     |
| RecordType | String | 否       | MP4                         | 录制类型，目前支持MP4、FLV、HLS三种，不传查询所有类型。      |
| StartTime  | String | 是       | 2020-09-09T16:00:00Z        | 起始时间。日期格式按照ISO8601表示法，并使用UTC时间。格式为：YYYY-MM-DDThh:mm:ssZ |
| EndTime    | String | 是       | 2020-09-10T15:59:59Z        | 结束时间。需大于起始时间。日期格式按照ISO8601表示法，并使用UTC时间。格式为：YYYY-MM-DDThh:mm:ssZ |

**返回参数**

| 参数            | 类型             | 示例值                               | 描述                   |
| --------------- | ---------------- | ------------------------------------ | ---------------------- |
| RecordDataInfos | RecordDataInfo[] |                                      | 录制文件时长统计信息。 |
| RequestId       | String           | D1B89436-9C44-7A8C-C3C6-144932BBEB1B | 该条任务请求ID。       |

**RecordDataInfo类型**

| 参数   | 类型   | 示例值     | 描述                         |
| ------ | ------ | ---------- | ---------------------------- |
| Date   | String | 2020-09-10 | 日期，具体到天。             |
| Total  | Int    | 3600       | 单日录制总时长，单位：秒。   |
| Detail | []     |            | 区分录制格式的录制时长信息。 |

**Detail类型**

| 参数 | 类型 | 示例值 | 描述                        |
| ---- | ---- | ------ | --------------------------- |
| MP4  | Int  | 1000   | MP4格式录制时长，单位：秒。 |
| FLV  | Int  | 1000   | FLV格式录制时长，单位：秒。 |
| HLS  | Int  | 1600   | HLS格式录制时长，单位：秒。 |

**示例**

**请求示例**

```
http://www.xxxxxx.com?Action=DescribeUsageStatRecordData&GroupId=32388487739092997&StartTime=2020-09-09T16:00:00Z&EndTime=2020-09-09T15:59:59Z&<公共请求参数>
```

**返回示例**

```
{
	RecordDataInfos: {
		RecordDataInfo: [
			{
				Date: "2020-09-10",
				Total: 3600,
				Detail: {
					MP4: 1000,
					FLV: 1000,
					HLS: 1600
				}
			}
		]
	},
	RequestId: "A6C90D1F-D739-8DB7-4452-CE25B405B16B"
}
```

####    (4) DescribeUsageStatSnapshotData

**接口描述**
查询空间截图张数统计。

> 数据查询的起止时间跨度最大为90天。

**请求参数**

| 参数      | 类型   | 是否必要 | 示例值                        | 描述                                                         |
| --------- | ------ | -------- | ----------------------------- | ------------------------------------------------------------ |
| Action    | String | 是       | DescribeUsageStatSnapshotData | 操作接口名，系统规定参数。取值：DescribeUsageStatSnapshotData |
| GroupId   | String | 是       | 32388487739092997             | 空间ID。                                                     |
| StartTime | String | 是       | 2020-09-09T16:00:00Z          | 起始时间。日期格式按照ISO8601表示法，并使用UTC时间。格式为：YYYY-MM-DDThh:mm:ssZ |
| EndTime   | String | 是       | 2020-09-10T15:59:59Z          | 结束时间。需大于起始时间。日期格式按照ISO8601表示法，并使用UTC时间。格式为：YYYY-MM-DDThh:mm:ssZ |

**返回参数**

| 参数              | 类型               | 示例值                               | 描述                   |
| ----------------- | ------------------ | ------------------------------------ | ---------------------- |
| SnapshotDataInfos | SnapshotDataInfo[] |                                      | 录制文件时长统计信息。 |
| RequestId         | String             | D1B89436-9C44-7A8C-C3C6-144932BBEB1B | 该条任务请求ID。       |

**SnapshotDataInfo类型**

| 参数  | 类型   | 示例值     | 描述             |
| ----- | ------ | ---------- | ---------------- |
| Date  | String | 2020-09-10 | 日期，具体到天。 |
| Total | Int    | 3600       | 单日截图总张数。 |

**示例**

**请求示例**

```
http://www.xxxxxx.com?Action=DescribeUsageStatSnapshotData&GroupId=32388487739092997&StartTime=2020-09-09T16:00:00Z&EndTime=2020-09-09T15:59:59Z&<公共请求参数>
```

**返回示例**

```
{
	SnapshotDataInfos: {
		SnapshotDataInfo: [
			{
				Date: "2020-09-10",
				Total: 365
			}
		]
	},
	RequestId: "1FB1B920-B1B4-D502-87CD-5A7633E0BD32"
}
```

####    (5) DescribeUsageStatTrafficData

**接口描述**
查询空间播流流量统计。

> 数据查询的起止时间跨度最大为90天。

**请求参数**

| 参数      | 类型   | 是否必要 | 示例值                       | 描述                                                         |
| --------- | ------ | -------- | ---------------------------- | ------------------------------------------------------------ |
| Action    | String | 是       | DescribeUsageStatTrafficData | 操作接口名，系统规定参数。取值：DescribeUsageStatTrafficData |
| GroupId   | String | 是       | 32388487739092997            | 空间ID。                                                     |
| StartTime | String | 是       | 2020-09-09T16:00:00Z         | 起始时间。日期格式按照ISO8601表示法，并使用UTC时间。格式为：YYYY-MM-DDThh:mm:ssZ |
| EndTime   | String | 是       | 2020-09-10T15:59:59Z         | 结束时间。需大于起始时间。日期格式按照ISO8601表示法，并使用UTC时间。格式为：YYYY-MM-DDThh:mm:ssZ |

**返回参数**

| 参数                   | 类型         | 示例值                               | 描述             |
| ---------------------- | ------------ | ------------------------------------ | ---------------- |
| TrafficDataPerInterval | DataModule[] |                                      | 流量统计信息。   |
| RequestId              | String       | D1B89436-9C44-7A8C-C3C6-144932BBEB1B | 该条任务请求ID。 |

**DataModule类型**

| 参数         | 类型   | 示例值               | 描述                    |
| ------------ | ------ | -------------------- | ----------------------- |
| TimeStamp    | String | 2020-09-17T05:00:00Z | UTC时间。               |
| TrafficValue | Int    | 3040                 | 详细使用数据。单位（B） |

**示例**

**请求示例**

```
http://www.xxxxxx.com?Action=DescribeUsageStatTrafficData&GroupId=32388487739092997&StartTime=2020-09-16T16:00:00Z&EndTime=2020-09-17T15:59:59Z&<公共请求参数>
```

**返回示例**

```
{
	TrafficDataPerInterval: {
		DataModule: [
			{
				TimeStamp: "2020-09-16T16:00:00Z",
				TrafficValue: 0
			}
		]
	},
	RequestId: "1FB1B920-B1B4-D502-87CD-5A7633E0BD32"
}
```

####    (6) DescribeUsageStatReqTrafficData

**接口描述**
查询空间推流流量统计。

> 数据查询的起止时间跨度最大为90天。

**请求参数**

| 参数      | 类型   | 是否必要 | 示例值                          | 描述                                                         |
| --------- | ------ | -------- | ------------------------------- | ------------------------------------------------------------ |
| Action    | String | 是       | DescribeUsageStatReqTrafficData | 操作接口名，系统规定参数。取值：DescribeUsageStatReqTrafficData |
| GroupId   | String | 是       | 32388487739092997               | 空间ID。                                                     |
| StartTime | String | 是       | 2020-09-09T16:00:00Z            | 起始时间。日期格式按照ISO8601表示法，并使用UTC时间。格式为：YYYY-MM-DDThh:mm:ssZ |
| EndTime   | String | 是       | 2020-09-10T15:59:59Z            | 结束时间。需大于起始时间。日期格式按照ISO8601表示法，并使用UTC时间。格式为：YYYY-MM-DDThh:mm:ssZ |

**返回参数**

| 参数                      | 类型         | 示例值                               | 描述             |
| ------------------------- | ------------ | ------------------------------------ | ---------------- |
| ReqTrafficDataPerInterval | DataModule[] |                                      | 流量统计信息。   |
| RequestId                 | String       | D1B89436-9C44-7A8C-C3C6-144932BBEB1B | 该条任务请求ID。 |

**DataModule类型**

| 参数            | 类型   | 示例值               | 描述                    |
| --------------- | ------ | -------------------- | ----------------------- |
| TimeStamp       | String | 2020-09-17T05:00:00Z | UTC时间。               |
| ReqTrafficValue | Int    | 3040                 | 详细使用数据。单位（B） |

**示例**

**请求示例**

```
http://www.xxxxxx.com?Action=DescribeUsageStatReqTrafficData&GroupId=32388487739092997&StartTime=2020-09-16T16:00:00Z&EndTime=2020-09-17T15:59:59Z&<公共请求参数>
```

**返回示例**

```
{
	ReqTrafficDataPerInterval: {
		DataModule: [
			{
				TimeStamp: "2020-09-16T16:00:00Z",
				ReqTrafficValue: 0
			}
		]
	},
	RequestId: "1FB1B920-B1B4-D502-87CD-5A7633E0BD32"
}
```

####    (7) DescribeUsageStatBpsData

**接口描述**
查询空间播放带宽统计。

> 数据查询的起止时间跨度最大为90天。

**请求参数**

| 参数      | 类型   | 是否必要 | 示例值                   | 描述                                                         |
| --------- | ------ | -------- | ------------------------ | ------------------------------------------------------------ |
| Action    | String | 是       | DescribeUsageStatBpsData | 操作接口名，系统规定参数。取值：DescribeUsageStatBpsData     |
| GroupId   | String | 是       | 32388487739092997        | 空间ID。                                                     |
| StartTime | String | 是       | 2020-09-09T16:00:00Z     | 起始时间。日期格式按照ISO8601表示法，并使用UTC时间。格式为：YYYY-MM-DDThh:mm:ssZ |
| EndTime   | String | 是       | 2020-09-10T15:59:59Z     | 结束时间。需大于起始时间。日期格式按照ISO8601表示法，并使用UTC时间。格式为：YYYY-MM-DDThh:mm:ssZ |

**返回参数**

| 参数               | 类型         | 示例值                               | 描述             |
| ------------------ | ------------ | ------------------------------------ | ---------------- |
| BpsDataPerInterval | DataModule[] |                                      | 带宽统计信息。   |
| RequestId          | String       | D1B89436-9C44-7A8C-C3C6-144932BBEB1B | 该条任务请求ID。 |

**DataModule类型**

| 参数      | 类型   | 示例值               | 描述                          |
| --------- | ------ | -------------------- | ----------------------------- |
| TimeStamp | String | 2020-09-17T05:00:00Z | UTC时间。                     |
| BpsValue  | Int    | 3040                 | bps数据值，单位：bit/second。 |

**示例**

**请求示例**

```
http://www.xxxxxx.com?Action=DescribeUsageStatBpsData&GroupId=32388487739092997&StartTime=2020-09-16T16:00:00Z&EndTime=2020-09-17T15:59:59Z&<公共请求参数>
```

**返回示例**

```
{
	BpsDataPerInterval: {
		DataModule: [
			{
				TimeStamp: "2020-09-16T16:00:00Z",
				BpsValue: 0
			}
		]
	},
	RequestId: "1FB1B920-B1B4-D502-87CD-5A7633E0BD32"
}
```

####    (8) DescribeUsageStatReqBpsData

**接口描述**
查询空间接入带宽统计。

> 数据查询的起止时间跨度最大为90天。

**请求参数**

| 参数      | 类型   | 是否必要 | 示例值                      | 描述                                                         |
| --------- | ------ | -------- | --------------------------- | ------------------------------------------------------------ |
| Action    | String | 是       | DescribeUsageStatReqBpsData | 操作接口名，系统规定参数。取值：DescribeUsageStatReqBpsData  |
| GroupId   | String | 是       | 32388487739092997           | 空间ID。                                                     |
| StartTime | String | 是       | 2020-09-09T16:00:00Z        | 起始时间。日期格式按照ISO8601表示法，并使用UTC时间。格式为：YYYY-MM-DDThh:mm:ssZ |
| EndTime   | String | 是       | 2020-09-10T15:59:59Z        | 结束时间。需大于起始时间。日期格式按照ISO8601表示法，并使用UTC时间。格式为：YYYY-MM-DDThh:mm:ssZ |

**返回参数**

| 参数                  | 类型         | 示例值                               | 描述             |
| --------------------- | ------------ | ------------------------------------ | ---------------- |
| ReqBpsDataPerInterval | DataModule[] |                                      | 带宽统计信息。   |
| RequestId             | String       | D1B89436-9C44-7A8C-C3C6-144932BBEB1B | 该条任务请求ID。 |

**DataModule类型**

| 参数        | 类型   | 示例值               | 描述                          |
| ----------- | ------ | -------------------- | ----------------------------- |
| TimeStamp   | String | 2020-09-17T05:00:00Z | UTC时间。                     |
| ReqBpsValue | Int    | 3040                 | bps数据值，单位：bit/second。 |

**示例**

**请求示例**

```
http://www.xxxxxx.com?Action=DescribeUsageStatReqBpsData&GroupId=32388487739092997&StartTime=2020-09-16T16:00:00Z&EndTime=2020-09-17T15:59:59Z&<公共请求参数>
```

**返回示例**

```
{
	ReqBpsDataPerInterval: {
		DataModule: [
			{
				TimeStamp: "2020-09-16T16:00:00Z",
				ReqBpsValue: 0
			}
		]
	},
	RequestId: "1FB1B920-B1B4-D502-87CD-5A7633E0BD32"
}
```



### 8、计费用量接口

#### (1) QueryChargingBpsMaxUsage

**接口描述**
获取带宽峰值。

**请求参数**

| 参数      | 类型   | 是否必要 | 示例值                   | 描述                                                         |
| --------- | ------ | -------- | ------------------------ | ------------------------------------------------------------ |
| Action    | String | 是       | QueryChargingBpsMaxUsage | 操作接口名，系统规定参数。取值：QueryChargingBpsMaxUsage     |
| Type      | String | 是       | 统计类型                 | 类型。取值：up,down                                          |
| StartTime | String | 是       | 2020-­09-­09T16:00:00Z   | 起始时间。日期格式按照ISO8601表示法，并 使用UTC时间。格式为：YYYY­-MM­-DDThh:mm:ssZ |
| EndTime   | String | 是       | 2020-­09-­09T21:59:00Z   | 结束时间。需大于起始时间。日期格式按照 ISO8601表示法，并使用UTC时间。格式为： YYYY­-MM­-DDThh:mm:ssZ |

**返回参数**

| 参数      | 类型    | 示例值                               | 描述              |
| --------- | ------- | ------------------------------------ | ----------------- |
| Datas     | Datas[] |                                      | 数据信息。        |
| RequestId | String  | 2479F3CC-8753-6741-09D6-90110E4B6E69 | 该条任务请求 ID。 |

**Datas数据**

| 参数   | 类型   | 示例值                                  | 描述                |
| ------ | ------ | --------------------------------------- | ------------------- |
| UserId | String | CIDC-U-bd427602c603438c940f218fb49470e8 | 用户ID。            |
| Usage  | String | 7224688.64                              | 带宽峰值。单位：bps |

**示例**

**请求示例**

```
http://www.xxxxxx.com?Action=QueryChargingBpsMaxUsage&Type=up&StartTime=2020-­09-­09T16:00:00Z&EndTime=2020-­09-­09T21:59:00Z<公共请求参数>
```

**返回示例**

```
{
	datas: [
		{
			Usage: "7224688.64",
			Userid: "CIDC-U-bd427602c603438c940f218fb49470e8"
		}
	],
	RequestId: "2479F3CC-8753-6741-09D6-90110E4B6E69"
}
```

#### (2) QueryChargingTrafficTotalUsage

**接口描述**
获取流量总量。

**请求参数**

| 参数      | 类型   | 是否必要 | 示例值                         | 描述                                                         |
| --------- | ------ | -------- | ------------------------------ | ------------------------------------------------------------ |
| Action    | String | 是       | QueryChargingTrafficTotalUsage | 操作接口名，系统规定参数。取值：QueryChargingTrafficTotalUsage |
| Type      | String | 是       | 统计类型                       | 类型。取值：up,down                                          |
| StartTime | String | 是       | 2020-­09-­09T16:00:00Z         | 起始时间。日期格式按照ISO8601表示法，并 使用UTC时间。格式为：YYYY­-MM­-DDThh:mm:ssZ |
| EndTime   | String | 是       | 2020-­09-­09T21:59:00Z         | 结束时间。需大于起始时间。日期格式按照 ISO8601表示法，并使用UTC时间。格式为： YYYY­-MM­-DDThh:mm:ssZ |

**返回参数**

| 参数      | 类型    | 示例值                               | 描述              |
| --------- | ------- | ------------------------------------ | ----------------- |
| Datas     | Datas[] |                                      | 数据信息。        |
| RequestId | String  | 2479F3CC-8753-6741-09D6-90110E4B6E69 | 该条任务请求 ID。 |

**Datas数据**

| 参数   | 类型   | 示例值                                  | 描述              |
| ------ | ------ | --------------------------------------- | ----------------- |
| UserId | String | CIDC-U-bd427602c603438c940f218fb49470e8 | 用户ID。          |
| Usage  | String | 7224688.64                              | 流量总量。单位：B |

**示例**

**请求示例**

```
http://www.xxxxxx.com?Action=QueryChargingTrafficTotalUsage&Type=up&StartTime=2020-­09-­09T16:00:00Z&EndTime=2020-­09-­09T21:59:00Z<公共请求参数>
```

**返回示例**

```
{
	datas: [
		{
			Usage: "7224688.64",
			Userid: "CIDC-U-bd427602c603438c940f218fb49470e8"
		}
	],
	RequestId: "2479F3CC-8753-6741-09D6-90110E4B6E69"
}
```

#### (3) QueryChargingDevicesOnlineMaxNum

**接口描述**
获取在线设备峰值。

**请求参数**

| 参数      | 类型   | 是否必要 | 示例值                           | 描述                                                         |
| --------- | ------ | -------- | -------------------------------- | ------------------------------------------------------------ |
| Action    | String | 是       | QueryChargingDevicesOnlineMaxNum | 操作接口名，系统规定参数。取值：QueryChargingDevicesOnlineMaxNum |
| StartTime | String | 是       | 2020-­09-­09T16:00:00Z           | 起始时间。日期格式按照ISO8601表示法，并 使用UTC时间。格式为：YYYY­-MM­-DDThh:mm:ssZ |
| EndTime   | String | 是       | 2020-­09-­09T21:59:00Z           | 结束时间。需大于起始时间。日期格式按照 ISO8601表示法，并使用UTC时间。格式为： YYYY­-MM­-DDThh:mm:ssZ |

**返回参数**

| 参数      | 类型    | 示例值                               | 描述              |
| --------- | ------- | ------------------------------------ | ----------------- |
| Datas     | Datas[] |                                      | 数据信息。        |
| RequestId | String  | 2479F3CC-8753-6741-09D6-90110E4B6E69 | 该条任务请求 ID。 |

**Datas数据**

| 参数   | 类型   | 示例值                                  | 描述                   |
| ------ | ------ | --------------------------------------- | ---------------------- |
| UserId | String | CIDC-U-bd427602c603438c940f218fb49470e8 | 用户ID。               |
| Usage  | String | 10                                      | 在线设备峰值。单位：台 |

**示例**

**请求示例**

```
http://www.xxxxxx.com?Action=QueryChargingDevicesOnlineMaxNum&StartTime=2020-­09-­09T16:00:00Z&EndTime=2020-­09-­09T21:59:00Z<公共请求参数>
```

**返回示例**

```
{
	datas: [
		{
			Usage: "10",
			Userid: "CIDC-U-bd427602c603438c940f218fb49470e8"
		}
	],
	RequestId: "2479F3CC-8753-6741-09D6-90110E4B6E69"
}
```

#### (4) QueryChargingRecordMaxNum

**接口描述**
获取录制路数并发峰值。

**请求参数**

| 参数      | 类型   | 是否必要 | 示例值                    | 描述                                                         |
| --------- | ------ | -------- | ------------------------- | ------------------------------------------------------------ |
| Action    | String | 是       | QueryChargingRecordMaxNum | 操作接口名，系统规定参数。取值：QueryChargingRecordMaxNum    |
| StartTime | String | 是       | 2020-­09-­09T16:00:00Z    | 起始时间。日期格式按照ISO8601表示法，并 使用UTC时间。格式为：YYYY­-MM­-DDThh:mm:ssZ |
| EndTime   | String | 是       | 2020-­09-­09T21:59:00Z    | 结束时间。需大于起始时间。日期格式按照 ISO8601表示法，并使用UTC时间。格式为： YYYY­-MM­-DDThh:mm:ssZ |

**返回参数**

| 参数      | 类型    | 示例值                               | 描述              |
| --------- | ------- | ------------------------------------ | ----------------- |
| Datas     | Datas[] |                                      | 数据信息。        |
| RequestId | String  | 2479F3CC-8753-6741-09D6-90110E4B6E69 | 该条任务请求 ID。 |

**Datas数据**

| 参数   | 类型   | 示例值                                  | 描述                       |
| ------ | ------ | --------------------------------------- | -------------------------- |
| UserId | String | CIDC-U-bd427602c603438c940f218fb49470e8 | 用户ID。                   |
| Usage  | String | 3                                       | 录制路数并发峰值。单位：路 |

**示例**

**请求示例**

```
http://www.xxxxxx.com?Action=QueryChargingRecordMaxNum&StartTime=2020-­09-­09T16:00:00Z&EndTime=2020-­09-­09T21:59:00Z<公共请求参数>
```

**返回示例**

```
{
	datas: [
		{
			Usage: "3",
			Userid: "CIDC-U-bd427602c603438c940f218fb49470e8"
		}
	],
	RequestId: "2479F3CC-8753-6741-09D6-90110E4B6E69"
}
```

#### (5) QueryChargingScreenshotTotal

**接口描述**
获取截图总张数。

**请求参数**

| 参数      | 类型   | 是否必要 | 示例值                       | 描述                                                         |
| --------- | ------ | -------- | ---------------------------- | ------------------------------------------------------------ |
| Action    | String | 是       | QueryChargingScreenshotTotal | 操作接口名，系统规定参数。取值：QueryChargingScreenshotTotal |
| StartTime | String | 是       | 2020-­09-­09T16:00:00Z       | 起始时间。日期格式按照ISO8601表示法，并 使用UTC时间。格式为：YYYY­-MM­-DDThh:mm:ssZ |
| EndTime   | String | 是       | 2020-­09-­09T21:59:00Z       | 结束时间。需大于起始时间。日期格式按照 ISO8601表示法，并使用UTC时间。格式为： YYYY­-MM­-DDThh:mm:ssZ |

**返回参数**

| 参数      | 类型    | 示例值                               | 描述              |
| --------- | ------- | ------------------------------------ | ----------------- |
| Datas     | Datas[] |                                      | 数据信息。        |
| RequestId | String  | 2479F3CC-8753-6741-09D6-90110E4B6E69 | 该条任务请求 ID。 |

**Datas数据**

| 参数   | 类型   | 示例值                                  | 描述                 |
| ------ | ------ | --------------------------------------- | -------------------- |
| UserId | String | CIDC-U-bd427602c603438c940f218fb49470e8 | 用户ID。             |
| Usage  | String | 100                                     | 截图总张数。单位：张 |

**示例**

**请求示例**

```
http://www.xxxxxx.com?Action=QueryChargingScreenshotTotal&Type=up&StartTime=2020-­09-­09T16:00:00Z&EndTime=2020-­09-­09T21:59:00Z<公共请求参数>
```

**返回示例**

```
{
	datas: [
		{
			Usage: "100",
			Userid: "CIDC-U-bd427602c603438c940f218fb49470e8"
		}
	],
	RequestId: "2479F3CC-8753-6741-09D6-90110E4B6E69"
}
```



### 9、订购相关接口

####  (1) CreateMtsService

**接口描述**
创建服务。

**请求参数**

| 参数       | 类型   | 是否必要 | 示例值                                          | 描述                                             |
| ---------- | ------ | -------- | ----------------------------------------------- | ------------------------------------------------ |
| Action     | String | 是       | CreateMtsService                                | 操作接口名，系统规定参数。取值：CreateMtsService |
| AccessInfo | String | 是       | {"AccessKeyId":"demo","AccessKeySecret":"demo"} | 对象存储密钥对信息。                             |
| UserId     | String | 是       | 12345678901234567890123456789012                | 用户ID。                                         |

**返回参数**

| 参数                | 类型   | 示例值                               | 描述                |
| ------------------- | ------ | ------------------------------------ | ------------------- |
| UserId              | String | BEA5625F-8FCF-48F4-851B-CA63946DA664 | 用户ID。            |
| UserAccessKeyId     | String | a2ba46f4d53fc0a9d8abbaa3c70ef556     | 用户密钥KeyID。     |
| UserAccessKeySecret | String | 33A7092AC96B0F41A34577D19FA4B72A     | 用户密钥KeySecret。 |
| RequestId           | String | BEA5625F-8FCF-48F4-851B-CA63946DA664 | 该条任务请求ID。    |

**示例**

**请求示例**

```
http://www.xxxxxx.com?Action=CreateMtsService&AccessInfo={"AccessKeyId":"demo","AccessKeySecret":"demo"}&UserId=xxx&<公共请求参数>
```

**返回示例**

```
{
	UserId: "12312312312312312312312312312312",
	UserAccessKeyId: "a2ba46f4d53fc0a9d8abbaa3c70ef556",
	UserAccessKeySecret: "33A7092AC96B0F41A34577D19FA4B72A",
	RequestId: "6A034208-91AF-5B20-4E47-50254CB0AB89"
}
```

####  (2) SuspendMtsService

**接口描述**
暂停服务。

**请求参数**

| 参数   | 类型   | 是否必要 | 示例值                           | 描述                                              |
| ------ | ------ | -------- | -------------------------------- | ------------------------------------------------- |
| Action | String | 是       | SuspendMtsService                | 操作接口名，系统规定参数。取值：SuspendMtsService |
| UserId | String | 是       | 12345678901234567890123456789012 | 用户ID。                                          |

**返回参数**

| 参数      | 类型   | 示例值                               | 描述             |
| --------- | ------ | ------------------------------------ | ---------------- |
| RequestId | String | BEA5625F-8FCF-48F4-851B-CA63946DA664 | 该条任务请求ID。 |

**示例**

**请求示例**

```
http://www.xxxxxx.com?Action=SuspendMtsService&UserId=xxx&<公共请求参数>
```

**返回示例**

```
{
    "RequestId": "BEA5625F-8FCF-48F4-851B-CA63946DA664"
}
```

####  (3) RenewMtsService

**接口描述**
恢复服务。

**请求参数**

| 参数   | 类型   | 是否必要 | 示例值                           | 描述                                            |
| ------ | ------ | -------- | -------------------------------- | ----------------------------------------------- |
| Action | String | 是       | RenewMtsService                  | 操作接口名，系统规定参数。取值：RenewMtsService |
| UserId | String | 是       | 12345678901234567890123456789012 | 用户ID。                                        |

**返回参数**

| 参数      | 类型   | 示例值                               | 描述             |
| --------- | ------ | ------------------------------------ | ---------------- |
| RequestId | String | BEA5625F-8FCF-48F4-851B-CA63946DA664 | 该条任务请求ID。 |

**示例**

**请求示例**

```
http://www.xxxxxx.com?Action=RenewMtsService&UserId=xxx&<公共请求参数>
```

**返回示例**

```
{
    "RequestId": "BEA5625F-8FCF-48F4-851B-CA63946DA664"
}
```

####  (4) DeleteMtsService

**接口描述**
删除服务。

**请求参数**

| 参数   | 类型   | 是否必要 | 示例值                           | 描述                                             |
| ------ | ------ | -------- | -------------------------------- | ------------------------------------------------ |
| Action | String | 是       | DeleteMtsService                 | 操作接口名，系统规定参数。取值：DeleteMtsService |
| UserId | String | 是       | 12345678901234567890123456789012 | 用户ID。                                         |

**返回参数**

| 参数      | 类型   | 示例值                               | 描述             |
| --------- | ------ | ------------------------------------ | ---------------- |
| RequestId | String | BEA5625F-8FCF-48F4-851B-CA63946DA664 | 该条任务请求ID。 |

**示例**

**请求示例**

```
http://www.xxxxxx.com?Action=DeleteMtsService&UserId=xxx&<公共请求参数>
```

**返回示例**

```
{
    "RequestId": "BEA5625F-8FCF-48F4-851B-CA63946DA664"
}
```

####  (5) GetMtsServiceStatus

**接口描述**
获取服务状态。

**请求参数**

| 参数   | 类型   | 是否必要 | 示例值                           | 描述                                                |
| ------ | ------ | -------- | -------------------------------- | --------------------------------------------------- |
| Action | String | 是       | GetMtsServiceStatus              | 操作接口名，系统规定参数。取值：GetMtsServiceStatus |
| UserId | String | 是       | 12345678901234567890123456789012 | 用户ID。                                            |

**返回参数**

| 参数      | 类型   | 示例值                               | 描述                                                |
| --------- | ------ | ------------------------------------ | --------------------------------------------------- |
| Status    | int    | 0                                    | 服务状态。取值：0(未开通) 1(暂停) 2(已开通) 3(删除) |
| RequestId | String | BEA5625F-8FCF-48F4-851B-CA63946DA664 | 该条任务请求ID。                                    |

**示例**

**请求示例**

```
http://www.xxxxxx.com?Action=GetMtsServiceStatus&UserId=xxx&<公共请求参数>
```

**返回示例**

```
{
    "Status": 0,
    "RequestId": "BEA5625F-8FCF-48F4-851B-CA63946DA664"
}
```

